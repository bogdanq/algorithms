{"version":3,"sources":["config.js","game/animations.js","game/barrier.js","graph/controller.js","graph/utils.js","graph/model.js","algoritms/utils.js","algoritms/bred-first-search.js","algoritms/depth-first-search.js","algoritms/model.js","game/model.js","game/utils.js","game/loop.js","canvas.js","control-canvas.js","config-canvas.js","App.js","index.js"],"names":["cellSize","pageWidth","window","innerWidth","pageHeight","innerHeight","borderSize","colorSchema","borderColor","blockColor","startEndColor","ceilType","START_POSITION","END_POSITION","BARIER","EMPTY","VISITED","getLocalSize","w","h","Math","floor","getGlobalSize","convertLocalPositionToGlobal","_ref","_ref2","Object","slicedToArray","x","y","drawSquare","_ref3","_ref3$color","color","position","context","width","_convertLocalPosition","_convertLocalPosition2","size","fillStyle","fillRect","getIndexByPosition","_ref4","_ref5","getPositionByIndex","index","drawSquareWithAnimation","params","animateId","_params$position","_params$scale","scale","requestAnimationFrame","objectSpread2","cancelAnimationFrame","drawMarkerWithAnimation","_params$width","_ref6","_ref6$color","_convertLocalPosition3","_convertLocalPosition4","strokeStyle","beginPath","moveTo","lineTo","stroke","drawMark","Barier","classCallCheck","this","canDrawe","canRemove","createClass","key","value","graphControll","Graph","graph","cellCount","lastIndex","clear","type","siblings","getSiblings","filter","item","left","getLeftSibling","top","getTopSibling","right","getRightSibling","down","getDownSibling","getTopLeftDiagonal","getTopRightDiagonal","getBotRightDiagonal","getBotLeftDiagonal","bot","_getLocalSize","setBarrierToGraph","barriers","forEach","barrier","updateGraph","getIndex","setStartPositionToGraph","startIndex","setEndPositionToGraph","endIndex","graphDomain","createDomain","resetStore","event","clearCanvas","setBarrier","removeBarrierItem","triggerStartPosition","triggerEndPosition","$startEndPosition","store","$barriers","onCreateStore","reset","removedBarrier","guard","source","sample","clock","fn","state","find","Boolean","watch","remove","on","concat","toConsumableArray","removed","$graph","combine","startEndPosition","map","_state$startEndPositi","start","end","createGraph","canVisitedVertex","vertex","restorePath","parent","path","target","unshift","length","push","removeDoubleVertex","result","newErr","includes","apply","breadthFirstSearch","logger","createLogger","removeVertexQ","removeVertexV","count","isWork","queue","visited","currentIndex","shift","setVertex","data","name","i","next","getVertexByIndex","setDrowAnimated","depthFirstSearch","stack","algoritmsDomain","selectAlgoritm","createEvent","incrementVertex","increment","$numberOfIterations","_","$canDrowAnimated","$currentAlgoritm","restore","$traversedVertexes","defineProperty","$vertexesCount","$algoritms","createStore","searchFunction","$searchAlgoritm","currentAlgoritm","algoritms","algoritm","setGameStatus","gameStatus","END_GAME","START","RESTART","PAUSE","RESUME","CLEAR","gameDomain","setTimer","$path","$currentTimer","$gameState","startGame","endGame","checkGameStatus","_len","arguments","status","Array","_key","some","renderVisitedVertex","_getPositionByIndex","_getPositionByIndex2","_graph$startEndPositi","time","performance","now","timeEnd","GameLoop","_this","traversedVertexes","vertexesCount","gameState","getState","fps","clearTimeout","setInterval","getFps","_ref2$path","_ref2$color","prev","lineWidth","renderPath","gameLoop","canvasControl","Controll","isMouseDown","isMouseMove","listeners","disabledListeners","disabledListener","includeListener","canvas","_this2","addEventListener","userEvent","eventListener","_getLocalSize3","clientX","clientY","getTargetIndex","init","$algoritState","canDrowAnimated","renderCeil","renderForMove","renderForClick","renderLogic","_getLocalSize2","findIndex","renderStart","renderEnd","document","getElementById","getContext","localSize","globalSize","gridData","grid","Path2D","applyStyles","buildGrid","render","clearRect","height","clearALlCanvas","setState","renderActionsCeil","renderBarrier","configureCanvas","registerClickEventToCanvas","addMouseMoveEvent","e","s","addMouseUpEvent","addMouseClickEvent","merge","objectWithoutProperties","removeAnimation","renderCanvas","$store","App","_store$path","_store$path$timeEnd","_store$path2","_store$path2$path","useStore","currentTimer","react_default","a","createElement","className","react_draggable_default","numberOfIterations","toFixed","onClick","Fragment","max","min","maxLength","onChange","parseInt","__webpack_require__","d","__webpack_exports__","_setVertex","_setDrowAnimated","utils_canVisitedVertex","barrier_Barier","loop_GameLoop","rootElement","ReactDOM"],"mappings":"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","file":"static/js/main.9bca5c10.chunk.js","sourcesContent":["export const cellSize = 35;\r\nexport const pageWidth = window.innerWidth;\r\nexport const pageHeight = window.innerHeight;\r\nexport const borderSize = 0.5;\r\nexport const boardLength = pageWidth * pageHeight;\r\nexport const startPosition = 0;\r\nexport const endPosition = 110;\r\n\r\nexport const colorSchema = {\r\n  borderColor: \"#000\",\r\n  blockColor: \"#bbbbbb\",\r\n  startEndColor: [\"green\", \"red\"],\r\n};\r\n\r\nexport const ceilType = {\r\n  START_POSITION: \"START_POSITION\",\r\n  END_POSITION: \"END_POSITION\",\r\n  BARIER: \"BARIER\",\r\n  EMPTY: \"EMPTY\",\r\n  VISITED: \"VISITED\",\r\n};\r\n\r\nexport function getLocalSize(w, h) {\r\n  return {\r\n    w: Math.floor(w / cellSize),\r\n    h: Math.floor(h / cellSize),\r\n  };\r\n}\r\n\r\nexport function getGlobalSize(w, h) {\r\n  return {\r\n    w: Math.floor(w * cellSize),\r\n    h: Math.floor(h * cellSize),\r\n  };\r\n}\r\n\r\nexport function convertLocalPositionToGlobal([x, y]) {\r\n  return [x * cellSize, y * cellSize];\r\n}\r\n\r\nexport function drawSquare({\r\n  color = \"rgb(152, 251, 152)\",\r\n  position,\r\n  context,\r\n  width,\r\n}) {\r\n  const [x, y] = convertLocalPositionToGlobal(position);\r\n  const size = width || cellSize - borderSize * 2;\r\n\r\n  context.fillStyle = color;\r\n  context.fillRect(x + borderSize * 2, y + borderSize * 2, size, size);\r\n}\r\n\r\nexport function clearALlCanvas(context, canvas) {\r\n  return context.clearRect(0, 0, canvas.width, canvas.height);\r\n}\r\n\r\nexport function getIndexByPosition([x, y]) {\r\n  const { w } = getLocalSize(pageWidth, pageHeight);\r\n\r\n  return y * w + x;\r\n}\r\n\r\nexport function getPositionByIndex(index) {\r\n  const { w } = getLocalSize(pageWidth, pageHeight);\r\n  const y = Math.floor(index / w);\r\n  const x = index - y * w;\r\n\r\n  return [x, y];\r\n}\r\n\r\nexport function getTargetIndex(event) {\r\n  const { w, h } = getLocalSize(event.clientX, event.clientY);\r\n  const index = getIndexByPosition([w, h]);\r\n\r\n  return index;\r\n}\r\n\r\nexport function drawMark({ color = \"#e84a4a\", position, context }) {\r\n  const [x, y] = convertLocalPositionToGlobal(position);\r\n\r\n  context.strokeStyle = color;\r\n\r\n  context.beginPath();\r\n  context.moveTo(x + 10, y + 10);\r\n  context.lineTo(x + cellSize - 10, y + cellSize - 10);\r\n  context.stroke();\r\n\r\n  context.beginPath();\r\n  context.moveTo(x + cellSize - 10, y + 10);\r\n  context.lineTo(x + 10, y + cellSize - 10);\r\n  context.stroke();\r\n}\r\n","import { drawSquare, drawMark, cellSize } from \"../config\";\r\n\r\nexport function drawSquareWithAnimation(params) {\r\n  let animateId;\r\n  let {\r\n    position: [x, y],\r\n    width,\r\n    scale = 0.3,\r\n  } = params;\r\n\r\n  if (width < cellSize) {\r\n    animateId = requestAnimationFrame(() =>\r\n      drawSquareWithAnimation({\r\n        ...params,\r\n        width,\r\n        scale,\r\n      })\r\n    );\r\n\r\n    drawSquare({\r\n      ...params,\r\n      position: [x + scale, y + scale],\r\n    });\r\n\r\n    if (scale > 0 && width % 5 === 0) {\r\n      scale = scale - 0.1;\r\n    }\r\n\r\n    width++;\r\n  } else {\r\n    cancelAnimationFrame(animateId);\r\n  }\r\n}\r\n\r\nexport function drawMarkerWithAnimation(params) {\r\n  let { width = cellSize - 10 } = params;\r\n  let animateId;\r\n\r\n  if (width < cellSize) {\r\n    animateId = requestAnimationFrame(() =>\r\n      drawMarkerWithAnimation({\r\n        ...params,\r\n        width,\r\n      })\r\n    );\r\n\r\n    drawMark({\r\n      ...params,\r\n      width,\r\n    });\r\n\r\n    width++;\r\n  } else {\r\n    drawSquare({\r\n      ...params,\r\n      color: \"#fff\",\r\n      width: 0,\r\n    });\r\n\r\n    cancelAnimationFrame(animateId);\r\n  }\r\n}\r\n","import { getPositionByIndex, drawSquare, colorSchema } from \"../config\";\r\nimport { drawSquareWithAnimation, drawMarkerWithAnimation } from \"./animations\";\r\n\r\nexport class Barier {\r\n  constructor(index) {\r\n    this.index = index;\r\n    this.canDrawe = false;\r\n    this.context = null;\r\n    this.canRemove = false;\r\n    this.position = false;\r\n  }\r\n\r\n  getBarier() {\r\n    return this;\r\n  }\r\n\r\n  getIndex() {\r\n    return this.index;\r\n  }\r\n\r\n  render(context) {\r\n    this.context = context;\r\n    this.position = getPositionByIndex(this.index);\r\n\r\n    if (!this.canRemove) {\r\n      if (!this.canDrawe) {\r\n        drawSquareWithAnimation({\r\n          position: this.position,\r\n          context,\r\n          color: colorSchema.blockColor,\r\n          width: 20,\r\n        });\r\n      } else {\r\n        drawSquare({\r\n          position: this.position,\r\n          context,\r\n          color: colorSchema.blockColor,\r\n        });\r\n      }\r\n\r\n      this.canDrawe = true;\r\n    }\r\n  }\r\n\r\n  remove() {\r\n    this.canRemove = true;\r\n\r\n    drawMarkerWithAnimation({\r\n      position: this.position,\r\n      context: this.context,\r\n    });\r\n  }\r\n}\r\n","import { ceilType, pageWidth, getLocalSize, pageHeight } from \"../config\";\r\n\r\nclass Graph {\r\n  constructor({ w, h }) {\r\n    this.graph = {};\r\n    this.cellCount = w * h;\r\n    this.lastIndex = null;\r\n  }\r\n\r\n  createGraph() {\r\n    this.clear();\r\n    for (let index = 0; index < this.cellCount; index++) {\r\n      this.graph[index] = {\r\n        type: ceilType.EMPTY,\r\n        siblings: this.getSiblings(index).filter(\r\n          (item) => typeof item !== \"undefined\"\r\n        ),\r\n      };\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  getVertexByIndex(index) {\r\n    return this.graph[index];\r\n  }\r\n\r\n  updateGraph({ index, type }) {\r\n    if (this.graph[index]) {\r\n      this.graph[index] = { ...this.graph[index], type };\r\n      if (type === ceilType.BARIER) {\r\n        this.graph[index] = { ...this.graph[index], type, siblings: [] };\r\n      }\r\n    }\r\n  }\r\n\r\n  getSiblings(index) {\r\n    const left = this.getLeftSibling(index);\r\n    const top = this.getTopSibling(index);\r\n    const right = this.getRightSibling(index);\r\n    const down = this.getDownSibling(index);\r\n\r\n    const topLeft = this.getTopLeftDiagonal(top, left);\r\n    const topRight = this.getTopRightDiagonal(top, right);\r\n    const botRight = this.getBotRightDiagonal(down, right);\r\n    const botLeft = this.getBotLeftDiagonal(down, left);\r\n\r\n    // return [left, top, right, down];\r\n    return [left, topLeft, top, topRight, right, botRight, down, botLeft];\r\n  }\r\n\r\n  getTopLeftDiagonal(top, left) {\r\n    if (top >= 0 && left >= 0) {\r\n      return top - 1;\r\n    }\r\n  }\r\n\r\n  getTopRightDiagonal(top, right) {\r\n    if (top >= 0 && right >= 0) {\r\n      return top + 1;\r\n    }\r\n  }\r\n\r\n  getBotLeftDiagonal(bot, left) {\r\n    if (bot >= 0 && left >= 0) {\r\n      return bot - 1;\r\n    }\r\n  }\r\n\r\n  getBotRightDiagonal(bot, right) {\r\n    if (bot >= 0 && right) {\r\n      return bot + 1;\r\n    }\r\n  }\r\n\r\n  getBottomDiagonal(down) {\r\n    const left = down - 1;\r\n    const right = down + 1;\r\n\r\n    return [left, right];\r\n  }\r\n\r\n  getDownSibling(index) {\r\n    const { w, h } = getLocalSize(pageWidth, pageHeight);\r\n\r\n    const hasDownNeighbour = Math.floor(index / w) < h - 1;\r\n\r\n    if (hasDownNeighbour) {\r\n      return index + w;\r\n    }\r\n  }\r\n\r\n  getTopSibling(index) {\r\n    const { w } = getLocalSize(pageWidth, pageHeight);\r\n\r\n    const hasTopNeighbour = Math.floor(index / w) > 0;\r\n\r\n    if (hasTopNeighbour) {\r\n      return index - w;\r\n    }\r\n  }\r\n\r\n  getRightSibling(index) {\r\n    const { w } = getLocalSize(pageWidth, pageHeight);\r\n\r\n    const hasRightNeighbour = index % w < w - 1;\r\n\r\n    if (hasRightNeighbour) {\r\n      return index + 1;\r\n    }\r\n  }\r\n\r\n  getLeftSibling(index) {\r\n    const { w } = getLocalSize(pageWidth, pageHeight);\r\n\r\n    const hasLeftNeighbour = index % w > 0;\r\n\r\n    if (hasLeftNeighbour) {\r\n      return index - 1;\r\n    }\r\n  }\r\n\r\n  getGraph() {\r\n    return this.graph;\r\n  }\r\n\r\n  clear() {\r\n    this.graph = {};\r\n    return this;\r\n  }\r\n}\r\n\r\nexport const graphControll = new Graph(getLocalSize(pageWidth, pageHeight));\r\n","import { ceilType } from \"../config\";\r\n\r\nexport function setBarrierToGraph(graph, barriers) {\r\n  barriers.forEach((barrier) => {\r\n    graph.updateGraph({ index: barrier.getIndex(), type: ceilType.BARIER });\r\n  });\r\n}\r\n\r\nexport function setStartPositionToGraph(graph, startIndex) {\r\n  graph.updateGraph({ index: startIndex, type: ceilType.START_POSITION });\r\n}\r\n\r\nexport function setEndPositionToGraph(graph, endIndex) {\r\n  graph.updateGraph({ index: endIndex, type: ceilType.END_POSITION });\r\n}\r\n","import { combine, createDomain, sample, guard } from \"effector\";\r\nimport { startPosition, endPosition } from \"../config\";\r\nimport { graphControll } from \"./controller\";\r\nimport {\r\n  setBarrierToGraph,\r\n  setStartPositionToGraph,\r\n  setEndPositionToGraph,\r\n} from \"./utils\";\r\nimport { Barier } from \"../game\";\r\n\r\nconst graphDomain = createDomain(\"graph\");\r\n\r\nexport const resetStore = graphDomain.event();\r\nexport const clearCanvas = graphDomain.event();\r\n\r\nexport const setBarrier = graphDomain.event();\r\nexport const removeBarrierItem = graphDomain.event();\r\n\r\nexport const triggerStartPosition = graphDomain.event();\r\nexport const triggerEndPosition = graphDomain.event();\r\n\r\nexport const $startEndPosition = graphDomain.store([\r\n  startPosition,\r\n  endPosition,\r\n]);\r\n\r\nexport const $barriers = graphDomain.store([]);\r\n\r\ngraphDomain.onCreateStore((store) => store.reset(resetStore));\r\n\r\nexport const removedBarrier = guard({\r\n  source: sample({\r\n    source: $barriers,\r\n    clock: removeBarrierItem,\r\n    fn: (state, index) => state.find((item) => item.getIndex() === index),\r\n  }),\r\n  filter: Boolean,\r\n});\r\n\r\nremovedBarrier.watch((item) => item.remove());\r\n\r\n$barriers\r\n  .on(setBarrier, (state, index) => {\r\n    const barrier = new Barier(index);\r\n\r\n    const isFindIndex = state.find((item) => item.getIndex() === index);\r\n\r\n    return isFindIndex ? state : [...state, barrier];\r\n  })\r\n  .on(removedBarrier, (state, removed) =>\r\n    state.filter((item) => item !== removed)\r\n  );\r\n\r\n$startEndPosition\r\n  .on(triggerStartPosition, (state, index) => [index, state[1]])\r\n  .on(triggerEndPosition, (state, index) => [state[0], index]);\r\n\r\nexport const $graph = combine({\r\n  barrier: $barriers,\r\n  startEndPosition: $startEndPosition,\r\n}).map((state) => {\r\n  const [start, end] = state.startEndPosition;\r\n\r\n  const graph = graphControll.createGraph();\r\n\r\n  setBarrierToGraph(graph, state.barrier);\r\n  setStartPositionToGraph(graph, start);\r\n  setEndPositionToGraph(graph, end);\r\n\r\n  return { ...state, graph: graph.graph };\r\n});\r\n","import { ceilType } from \"../config\";\r\n\r\nexport const canVisitedVertex = (vertex) => {\r\n  if (vertex.type !== ceilType.BARIER) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport function restorePath(endIndex, startIndex, parent) {\r\n  const path = [];\r\n  let target = parent[endIndex];\r\n\r\n  while (target && target !== startIndex) {\r\n    path.unshift(target);\r\n    target = parent[target];\r\n  }\r\n\r\n  if (path.length > 0) {\r\n    path.push(endIndex);\r\n  }\r\n\r\n  path.unshift(startIndex);\r\n\r\n  return path;\r\n}\r\n\r\nexport function removeDoubleVertex() {\r\n  let result = [];\r\n\r\n  return function removeVertex(item) {\r\n    const newErr = item.filter((vertex) => !result.includes(vertex));\r\n\r\n    result.push(...newErr);\r\n\r\n    return newErr;\r\n  };\r\n}\r\n","import { createLogger } from \"../index\";\r\nimport { graphControll } from \"../graph\";\r\nimport { canVisitedVertex, restorePath, removeDoubleVertex } from \"./utils\";\r\n\r\nexport function breadthFirstSearch(startIndex, endIndex, graph) {\r\n  // console.log(graph);\r\n  const logger = createLogger();\r\n  const removeVertexQ = removeDoubleVertex();\r\n  const removeVertexV = removeDoubleVertex();\r\n  let count = 0;\r\n\r\n  let isWork = true;\r\n  const queue = [startIndex];\r\n  const visited = [startIndex];\r\n  const parent = {};\r\n\r\n  while (isWork && queue.length > 0) {\r\n    const currentIndex = queue.shift();\r\n\r\n    logger.setVertex({\r\n      data: removeVertexV(visited),\r\n      name: \"visited\",\r\n    });\r\n\r\n    for (let i = 0; i < graph[currentIndex].siblings.length; i++) {\r\n      const next = graph[currentIndex].siblings[i];\r\n      const vertex = graphControll.getVertexByIndex(next);\r\n\r\n      if (!visited.includes(next) && canVisitedVertex(vertex)) {\r\n        queue.push(next);\r\n        visited.push(next);\r\n\r\n        parent[next] = currentIndex;\r\n        count++;\r\n      }\r\n\r\n      if (next === endIndex) {\r\n        isWork = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    logger.setVertex({\r\n      data: removeVertexQ(queue),\r\n      name: \"queue\",\r\n    });\r\n  }\r\n\r\n  logger.setDrowAnimated(count);\r\n\r\n  return restorePath(endIndex, startIndex, parent);\r\n}\r\n","import { graphControll } from \"../graph\";\r\nimport { createLogger } from \"../index\";\r\nimport { canVisitedVertex, restorePath, removeDoubleVertex } from \"./utils\";\r\n\r\nexport function depthFirstSearch(startIndex, endIndex, graph) {\r\n  const logger = createLogger();\r\n  const removeVertexQ = removeDoubleVertex();\r\n  const removeVertexV = removeDoubleVertex();\r\n  let count = 0;\r\n\r\n  let isWork = true;\r\n  const stack = [startIndex];\r\n  const visited = [startIndex];\r\n  const parent = {};\r\n\r\n  while (isWork && stack.length > 0) {\r\n    const currentIndex = stack.shift();\r\n\r\n    logger.setVertex({\r\n      data: removeVertexV(visited),\r\n      name: \"visited\",\r\n    });\r\n\r\n    for (let i = 0; i < graph[currentIndex].siblings.length; i++) {\r\n      const next = graph[currentIndex].siblings[i];\r\n      const vertex = graphControll.getVertexByIndex(next);\r\n\r\n      if (!visited.includes(next) && canVisitedVertex(vertex)) {\r\n        stack.unshift(next);\r\n        visited.push(next);\r\n\r\n        parent[next] = currentIndex;\r\n        count++;\r\n      }\r\n\r\n      if (next === endIndex) {\r\n        isWork = false;\r\n        break;\r\n      }\r\n    }\r\n\r\n    logger.setVertex({\r\n      data: removeVertexQ(stack),\r\n      name: \"queue\",\r\n    });\r\n  }\r\n\r\n  logger.setDrowAnimated(count);\r\n\r\n  return restorePath(endIndex, startIndex, parent);\r\n}\r\n","import {\r\n  createStore,\r\n  combine,\r\n  createEvent,\r\n  restore,\r\n  createDomain,\r\n} from \"effector\";\r\nimport { breadthFirstSearch } from \"./bred-first-search\";\r\nimport { depthFirstSearch } from \"./depth-first-search\";\r\nimport { clearCanvas, resetStore } from \"../graph\";\r\nimport { setGameStatus, gameStatus } from \"../game\";\r\n\r\nconst algoritmsDomain = createDomain();\r\n\r\nexport const selectAlgoritm = createEvent();\r\nexport const incrementVertex = createEvent();\r\nexport const setVertex = createEvent();\r\nexport const setDrowAnimated = createEvent();\r\nexport const increment = createEvent();\r\n\r\nexport const $numberOfIterations = algoritmsDomain\r\n  .store(0)\r\n  .on(increment, (_, count) => count);\r\n\r\nexport const $canDrowAnimated = algoritmsDomain\r\n  .store(false)\r\n  .on(setDrowAnimated, () => true);\r\n\r\nexport const $currentAlgoritm = restore(selectAlgoritm, \"bredth first search\");\r\nexport const $traversedVertexes = algoritmsDomain\r\n  .store({\r\n    queue: [],\r\n    visited: [],\r\n  })\r\n  .on(setVertex, (state, { data, name }) => {\r\n    return { ...state, [name]: [...state[name], data] };\r\n  });\r\n\r\nexport const $vertexesCount = algoritmsDomain\r\n  .store(0)\r\n  .on(incrementVertex, (state) => state + 1);\r\n\r\nexport const $algoritms = createStore([\r\n  {\r\n    searchFunction: breadthFirstSearch,\r\n    name: \"bredth first search\",\r\n  },\r\n  {\r\n    searchFunction: depthFirstSearch,\r\n    name: \"depth first search\",\r\n  },\r\n]);\r\n\r\nexport const $searchAlgoritm = combine(\r\n  $currentAlgoritm,\r\n  $algoritms,\r\n  (currentAlgoritm, algoritms) =>\r\n    algoritms.find((algoritm) => algoritm.name === currentAlgoritm)\r\n);\r\n\r\nexport const createLogger = () => {\r\n  return {\r\n    setDrowAnimated: (count) => {\r\n      setDrowAnimated();\r\n      increment(count);\r\n    },\r\n\r\n    setVertex: (vertex) => {\r\n      setVertex(vertex);\r\n      incrementVertex();\r\n    },\r\n  };\r\n};\r\n\r\nalgoritmsDomain.onCreateStore((store) => store.reset(clearCanvas, resetStore));\r\n\r\nselectAlgoritm.watch(() => setGameStatus(gameStatus.END_GAME));\r\n","import { sample, guard, restore, forward, createDomain } from \"effector\";\r\nimport { $graph, resetStore, clearCanvas } from \"../graph\";\r\nimport { $searchAlgoritm } from \"../algoritms/model\";\r\nimport { canvasControl } from \"../control-canvas\";\r\n\r\nexport const gameStatus = {\r\n  START: \"START\",\r\n  RESTART: \"RESTART\",\r\n  PAUSE: \"PAUSE\",\r\n  RESUME: \"RESUME\",\r\n  CLEAR: \"CLEAR\",\r\n  END_GAME: \"END_GAME\",\r\n};\r\n\r\nconst gameDomain = createDomain(\"game\");\r\n\r\nexport const setGameStatus = gameDomain.event();\r\nexport const setTimer = gameDomain.event();\r\n\r\nexport const $path = gameDomain.store({}).reset(resetStore, clearCanvas);\r\nexport const $currentTimer = restore(setTimer, 16).reset(resetStore);\r\n\r\nexport const $gameState = restore(setGameStatus, gameStatus.END_GAME).reset(\r\n  resetStore\r\n);\r\n\r\nexport const startGame = guard({\r\n  source: $gameState,\r\n  filter: $gameState.map((state) => state === gameStatus.START),\r\n});\r\n\r\nguard({\r\n  source: $gameState,\r\n  filter: $gameState.map((state) => state === gameStatus.CLEAR),\r\n  target: resetStore,\r\n});\r\n\r\nexport const endGame = guard({\r\n  source: $gameState,\r\n  filter: $gameState.map((state) => state === gameStatus.END_GAME),\r\n});\r\n\r\nsample({\r\n  source: {\r\n    graph: $graph,\r\n    algoritm: $searchAlgoritm,\r\n  },\r\n  clock: startGame,\r\n  target: $path,\r\n  fn: ({ graph, algoritm }) => {\r\n    const [start, end] = graph.startEndPosition;\r\n\r\n    clearCanvas();\r\n\r\n    const time = window.performance.now();\r\n\r\n    const path = algoritm.searchFunction(start, end, graph.graph);\r\n    const timeEnd = window.performance.now() - time;\r\n\r\n    return { path, timeEnd };\r\n  },\r\n});\r\n","import { getPositionByIndex, drawSquare } from \"../config\";\r\n\r\nexport function checkGameStatus(target, ...status) {\r\n  return status.some((item) => target === item);\r\n}\r\n\r\nexport function renderVisitedVertex(barrier, context, color) {\r\n  for (let i = 0; i < barrier.length; i++) {\r\n    const [x, y] = getPositionByIndex(barrier[i]);\r\n    drawSquare({\r\n      position: [x, y],\r\n      context,\r\n      color,\r\n    });\r\n  }\r\n}\r\n","import { clearCanvas } from \"../graph\";\r\nimport { renderPath } from \"../canvas\";\r\nimport {\r\n  gameStatus,\r\n  $path,\r\n  setGameStatus,\r\n  $gameState,\r\n  $currentTimer,\r\n} from \"./model\";\r\nimport { renderVisitedVertex } from \"./utils\";\r\n\r\nexport class GameLoop {\r\n  constructor() {\r\n    this.count = 1;\r\n    this.animateId = null;\r\n  }\r\n\r\n  start(state, context) {\r\n    const { traversedVertexes, vertexesCount } = state;\r\n    const gameState = $gameState.getState();\r\n    const fps = $currentTimer.getState();\r\n\r\n    clearTimeout(this.animateId);\r\n\r\n    if (gameState === gameStatus.END_GAME) {\r\n      return;\r\n    }\r\n\r\n    if (gameState === gameStatus.PAUSE) {\r\n      clearTimeout(this.animateId);\r\n      return;\r\n    }\r\n\r\n    if (this.count < traversedVertexes.visited.length) {\r\n      renderVisitedVertex(\r\n        traversedVertexes.visited[this.count],\r\n        context,\r\n        \"#afeeee\"\r\n      );\r\n\r\n      if (this.count < traversedVertexes.visited.length - 1) {\r\n        renderVisitedVertex(\r\n          traversedVertexes.queue[this.count],\r\n          context,\r\n          \"rgb(152, 251, 152)\"\r\n        );\r\n      }\r\n\r\n      this.animateId = setInterval(\r\n        () => this.start({ traversedVertexes, vertexesCount }, context),\r\n        this.getFps(fps)\r\n      );\r\n\r\n      clearCanvas.watch(() => clearTimeout(this.animateId));\r\n\r\n      this.count++;\r\n    } else {\r\n      setGameStatus(gameStatus.END_GAME);\r\n      this.clear();\r\n      const { path } = $path.getState();\r\n      renderPath({\r\n        path,\r\n        context,\r\n      });\r\n    }\r\n  }\r\n\r\n  getFps(fps) {\r\n    const newFps = fps === 1 ? fps : fps * 10;\r\n    return 1000 / newFps;\r\n  }\r\n\r\n  clear() {\r\n    this.count = 1;\r\n    this.animateId = null;\r\n  }\r\n\r\n  removeAnimation() {\r\n    clearTimeout(this.animateId);\r\n  }\r\n}\r\n\r\nexport const gameLoop = new GameLoop();\r\n","import { guard, sample, merge, combine, forward } from \"effector\";\r\nimport {\r\n  colorSchema,\r\n  cellSize,\r\n  pageHeight,\r\n  pageWidth,\r\n  borderSize,\r\n  getLocalSize,\r\n  getGlobalSize,\r\n  drawSquare,\r\n  clearALlCanvas,\r\n  getPositionByIndex,\r\n  getIndexByPosition,\r\n  ceilType,\r\n  convertLocalPositionToGlobal,\r\n} from \"./config\";\r\nimport { configureCanvas } from \"./config-canvas\";\r\nimport { canvasControl } from \"./control-canvas\";\r\nimport {\r\n  setBarrier,\r\n  removeBarrierItem,\r\n  triggerStartPosition,\r\n  triggerEndPosition,\r\n  $graph,\r\n  resetStore,\r\n  clearCanvas,\r\n} from \"./graph\";\r\n\r\nimport { gameStatus, $gameState, gameLoop } from \"./game\";\r\nimport {\r\n  $canDrowAnimated,\r\n  $traversedVertexes,\r\n  $vertexesCount,\r\n} from \"./algoritms\";\r\n\r\nconst $algoritState = combine({\r\n  canDrowAnimated: $canDrowAnimated,\r\n  traversedVertexes: $traversedVertexes,\r\n  vertexesCount: $vertexesCount,\r\n  gameState: $gameState,\r\n});\r\n\r\nexport function renderBarrier(barrier, context) {\r\n  for (let i = 0; i < barrier.length; i++) {\r\n    barrier[i].render(context);\r\n  }\r\n}\r\n\r\nfunction renderActionsCeil(startEndPosition, context) {\r\n  for (let i = 0; i < startEndPosition.length; i++) {\r\n    const index = getPositionByIndex(startEndPosition[i]);\r\n    drawSquare({\r\n      position: index,\r\n      context,\r\n      color: colorSchema.startEndColor[i],\r\n    });\r\n  }\r\n}\r\n\r\nfunction renderCeil(event, state) {\r\n  const { w, h } = getLocalSize(event.clientX, event.clientY);\r\n  const index = getIndexByPosition([w, h]);\r\n\r\n  const [startIndex, endIndex] = state.startEndPosition;\r\n\r\n  return {\r\n    renderForMove: () => {\r\n      if (index !== startIndex && index !== endIndex) {\r\n        setBarrier(index);\r\n      }\r\n    },\r\n    renderForClick: () => {\r\n      if (index !== startIndex && index !== endIndex) {\r\n        removeBarrierItem(index);\r\n      }\r\n    },\r\n  };\r\n}\r\n\r\nfunction renderStart(index, state) {\r\n  const findIndex = state.barrier.find((barrier) => barrier.index === index);\r\n  const [, endIndex] = state.startEndPosition;\r\n\r\n  if (!findIndex && index !== endIndex) {\r\n    triggerStartPosition(index);\r\n  }\r\n}\r\n\r\nfunction renderEnd(index, state) {\r\n  const findIndex = state.barrier.find((barrier) => barrier.index === index);\r\n  const [startIndex] = state.startEndPosition;\r\n\r\n  if (!findIndex && index !== startIndex) {\r\n    triggerEndPosition(index);\r\n  }\r\n}\r\n\r\nlet type = null;\r\nfunction renderLogic(event) {\r\n  const { w, h } = getLocalSize(event.clientX, event.clientY);\r\n  const index = getIndexByPosition([w, h]);\r\n  const state = $graph.getState();\r\n\r\n  if (!type) {\r\n    type = state.graph[index].type;\r\n  }\r\n\r\n  switch (type) {\r\n    case ceilType.BARIER:\r\n      return renderCeil(event, state).renderForClick();\r\n    case ceilType.START_POSITION:\r\n      return renderStart(index, state);\r\n    case ceilType.END_POSITION:\r\n      return renderEnd(index, state);\r\n    case ceilType.EMPTY:\r\n      return renderCeil(event, state).renderForMove();\r\n  }\r\n}\r\n\r\nexport function renderCanvas(canvas, context) {\r\n  const localSize = getLocalSize(pageWidth, pageHeight);\r\n  const globalSize = getGlobalSize(localSize.w, localSize.h);\r\n  const gridData = buildGrid(context);\r\n\r\n  configureCanvas(canvas, globalSize);\r\n\r\n  canvasControl.registerClickEventToCanvas(canvas);\r\n  canvasControl.addMouseMoveEvent((e, s) => {\r\n    return renderLogic(e, s);\r\n  });\r\n  canvasControl.addMouseUpEvent(() => (type = null));\r\n  canvasControl.addMouseClickEvent((e, s) => renderCeil(e, s).renderForClick());\r\n\r\n  function render(state) {\r\n    clearALlCanvas(context, canvas);\r\n    canvasControl.setState(state);\r\n\r\n    renderActionsCeil(state.startEndPosition, context);\r\n    renderBarrier(state.barrier, context);\r\n\r\n    gridData.applyStyles();\r\n    context.stroke(gridData.grid);\r\n  }\r\n\r\n  $graph.watch(render);\r\n\r\n  sample({\r\n    source: $graph,\r\n    clock: merge([resetStore, clearCanvas]),\r\n  }).watch(render);\r\n\r\n  $algoritState.watch(({ canDrowAnimated, gameState, ...state }) => {\r\n    if (canDrowAnimated) {\r\n      if (gameState === gameStatus.START) {\r\n        gameLoop.clear();\r\n      }\r\n\r\n      gameLoop.removeAnimation();\r\n      gameLoop.start(state, context);\r\n    }\r\n  });\r\n}\r\n\r\nlet prev = null;\r\nexport function renderPath({ context, path = [], color = \"green\" }) {\r\n  for (let i = 0; i < path.length; i++) {\r\n    const position = getPositionByIndex(path[i]);\r\n    const [x, y] = convertLocalPositionToGlobal(position);\r\n\r\n    if (prev) {\r\n      context.beginPath();\r\n      context.strokeStyle = color;\r\n      context.lineWidth = 2;\r\n      context.moveTo(prev[0], prev[1]);\r\n      context.lineTo(x + cellSize / 2, y + cellSize / 2);\r\n      context.stroke();\r\n    }\r\n\r\n    prev = [x + cellSize / 2, y + cellSize / 2];\r\n  }\r\n\r\n  prev = null;\r\n}\r\n\r\nfunction buildGrid(context) {\r\n  const grid = new Path2D();\r\n\r\n  const localSize = getLocalSize(pageWidth, pageHeight);\r\n  const globalSize = getGlobalSize(localSize.w, localSize.h);\r\n\r\n  for (let i = 0; i <= localSize.w; i++) {\r\n    grid.moveTo(i * cellSize + borderSize, 0);\r\n    grid.lineTo(i * cellSize + borderSize, globalSize.h);\r\n  }\r\n\r\n  for (let i = 0; i <= localSize.h; i++) {\r\n    grid.moveTo(0, i * cellSize + borderSize);\r\n    grid.lineTo(globalSize.w, i * cellSize + borderSize);\r\n  }\r\n\r\n  return {\r\n    grid,\r\n    applyStyles: () => {\r\n      context.lineWidth = borderSize;\r\n      context.strokeStyle = colorSchema.borderColor;\r\n    },\r\n  };\r\n}\r\n\r\nconst canvas = document.getElementById(\"viewport\");\r\n\r\nif (canvas) {\r\n  const context = canvas.getContext(\"2d\");\r\n\r\n  renderCanvas(canvas, context);\r\n}\r\n","import { getTargetIndex } from \"./config\";\r\nimport { $gameState, gameStatus, checkGameStatus } from \"./game\";\r\n\r\nclass Controll {\r\n  constructor() {\r\n    this.isMouseDown = false;\r\n    this.isMouseMove = false;\r\n    this.listeners = [];\r\n    this.state = {};\r\n    this.lastIndex = null;\r\n    this.disabledListeners = [];\r\n  }\r\n\r\n  init() {\r\n    $gameState.watch((state) => {\r\n      if (\r\n        checkGameStatus(\r\n          state,\r\n          gameStatus.START,\r\n          gameStatus.PAUSE,\r\n          gameStatus.RESUME\r\n        )\r\n      ) {\r\n        this.disabledListener();\r\n      } else {\r\n        this.includeListener();\r\n      }\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  registerClickEventToCanvas(canvas) {\r\n    canvas.addEventListener(\"mousedown\", (event) => {\r\n      this.listeners\r\n        .filter((userEvent) => userEvent.type === \"mousedown\")\r\n        .forEach((userEvent) => userEvent.eventListener());\r\n\r\n      this.isMouseDown = true;\r\n      this.isMouseMove = false;\r\n    });\r\n\r\n    canvas.addEventListener(\"mouseup\", (event) => {\r\n      this.isMouseDown = false;\r\n      this.listeners\r\n        .filter((userEvent) => userEvent.type === \"mouseup\")\r\n        .forEach((userEvent) => userEvent.eventListener(event, this.state));\r\n    });\r\n\r\n    canvas.addEventListener(\"click\", (event) => {\r\n      this.listeners\r\n        .filter((userEvent) => userEvent.type === \"click\")\r\n        .forEach((userEvent) => {\r\n          if (!this.isMouseMove) {\r\n            userEvent.eventListener(event, this.state);\r\n          }\r\n        });\r\n    });\r\n\r\n    canvas.addEventListener(\"mousemove\", (event) => {\r\n      const index = getTargetIndex(event);\r\n\r\n      if (this.isMouseDown && index !== this.lastIndex) {\r\n        this.lastIndex = index;\r\n        this.isMouseMove = true;\r\n        this.listeners\r\n          .filter((userEvent) => userEvent.type === \"mousemove\")\r\n          .forEach((userEvent) =>\r\n            userEvent.eventListener(event, this.state, this.lastIndex)\r\n          );\r\n      }\r\n    });\r\n  }\r\n\r\n  disabledListener() {\r\n    this.clear();\r\n  }\r\n\r\n  includeListener() {\r\n    this.listeners = this.disabledListeners;\r\n  }\r\n\r\n  addMouseDownEvent(eventListener) {\r\n    this.listeners.push({ type: \"mousedown\", eventListener });\r\n  }\r\n\r\n  addMouseUpEvent(eventListener) {\r\n    this.listeners.push({ type: \"mouseup\", eventListener });\r\n  }\r\n\r\n  addMouseMoveEvent(eventListener) {\r\n    this.listeners.push({ type: \"mousemove\", eventListener });\r\n  }\r\n\r\n  addMouseClickEvent(eventListener) {\r\n    this.listeners.push({ type: \"click\", eventListener });\r\n  }\r\n\r\n  setState(state) {\r\n    this.state = state;\r\n    return this;\r\n  }\r\n\r\n  clear() {\r\n    if (this.listeners.length > 0) {\r\n      this.disabledListeners = this.listeners;\r\n      this.isMouseDown = false;\r\n      this.isMouseMove = false;\r\n      this.listeners = [];\r\n      this.lastIndex = null;\r\n    }\r\n  }\r\n}\r\n\r\nexport const canvasControl = new Controll();\r\ncanvasControl.init();\r\n","export function configureCanvas(canvas, { w, h }) {\r\n  canvas.height = h;\r\n  canvas.width = w;\r\n}\r\n","import React from \"react\";\r\nimport { useStore } from \"effector-react\";\r\nimport Draggable from \"react-draggable\";\r\nimport { renderCanvas } from \"./canvas\";\r\nimport {\r\n  setGameStatus,\r\n  gameStatus,\r\n  $gameState,\r\n  $path,\r\n  endGame,\r\n  $currentTimer,\r\n  setTimer,\r\n  checkGameStatus,\r\n} from \"./game\";\r\nimport {\r\n  $algoritms,\r\n  selectAlgoritm,\r\n  $currentAlgoritm,\r\n  $numberOfIterations,\r\n} from \"./algoritms/model\";\r\n\r\nimport \"./styles.css\";\r\nimport { sample, createStore, guard } from \"effector\";\r\n\r\nconst $store = createStore({});\r\n\r\nsample({\r\n  source: {\r\n    numberOfIterations: $numberOfIterations,\r\n    path: $path,\r\n  },\r\n  clock: endGame,\r\n  target: $store,\r\n});\r\n\r\nexport default function App() {\r\n  const algoritms = useStore($algoritms);\r\n  const currentAlgoritm = useStore($currentAlgoritm);\r\n  const gameState = useStore($gameState);\r\n  const store = useStore($store);\r\n  const currentTimer = useStore($currentTimer);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Draggable>\r\n        <div className=\"select-bar\">\r\n          <h2 className=\"select-bar_title\">Информация:</h2>\r\n          <div className=\"info-wrapper\">\r\n            <h3 className=\"select-bar_info\">\r\n              Количество итераций: <span>{store?.numberOfIterations || 0}</span>\r\n            </h3>\r\n            <h3 className=\"select-bar_info\">\r\n              Время прохождения:\r\n              <span> {store?.path?.timeEnd?.toFixed(4) || 0} ms</span>\r\n            </h3>\r\n            <h3 className=\"select-bar_info\">\r\n              Длина пути: <span>{store?.path?.path?.length || 0}</span>\r\n            </h3>\r\n          </div>\r\n          <h2 className=\"select-bar_title\">Выбирите алгоритм:</h2>\r\n          <ul>\r\n            {algoritms.map((algoritm, index) => (\r\n              <li\r\n                onClick={() => selectAlgoritm(algoritm.name)}\r\n                className={currentAlgoritm === algoritm.name ? \"isActive\" : \"\"}\r\n                key={algoritm.name}\r\n              >\r\n                {algoritm.name}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          <div className=\"btn-wrapper\">\r\n            <button\r\n              className=\"btn\"\r\n              onClick={() => setGameStatus(gameStatus.START)}\r\n            >\r\n              Старт\r\n            </button>\r\n            {checkGameStatus(\r\n              gameState,\r\n              gameStatus.START,\r\n              gameStatus.PAUSE,\r\n              gameStatus.RESUME\r\n            ) && (\r\n              <>\r\n                <button\r\n                  className=\"btn\"\r\n                  onClick={() => setGameStatus(gameStatus.PAUSE)}\r\n                >\r\n                  Пауза\r\n                </button>\r\n\r\n                <button\r\n                  className=\"btn\"\r\n                  onClick={() => setGameStatus(gameStatus.RESUME)}\r\n                >\r\n                  Продолжить\r\n                </button>\r\n              </>\r\n            )}\r\n\r\n            <button\r\n              className=\"btn\"\r\n              onClick={() => setGameStatus(gameStatus.CLEAR)}\r\n            >\r\n              Очистить\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"info-wrapper\">\r\n            <h3 className=\"select-bar_info\">\r\n              Скорость: <span>{currentTimer}</span>\r\n            </h3>\r\n            <input\r\n              type=\"number\"\r\n              value={currentTimer}\r\n              max=\"20\"\r\n              min=\"1\"\r\n              maxLength=\"2\"\r\n              onChange={({ target }) => {\r\n                setTimer(parseInt(target.value));\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </Draggable>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(<App />, rootElement);\r\n\r\nexport * from \"./algoritms\";\r\nexport * from \"./graph\";\r\nexport * from \"./game\";\r\n"],"sourceRoot":""}