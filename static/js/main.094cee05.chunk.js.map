{"version":3,"sources":["config.js","game/animations.js","game/barrier.js","graph/controller.js","graph/utils.js","graph/model.js","algoritms/utils.js","algoritms/controller.js","algoritms/bred-first-search.js","algoritms/depth-first-search.js","algoritms/model.js","game/utils.js","game/model.js","game/loop.js","canvas.js","control-canvas.js","config-canvas.js","gui/ui/molecules/modal-wrapper.js","gui/ui/atoms/icon.js","gui/ui/atoms/text.js","gui/ui/atoms/default-button.js","gui/ui/containers/flex-wrapper.js","gui/ui/atoms/default-switch.js","gui/ui/molecules/settings.js","gui/ui/molecules/info.js","gui/ui/molecules/about-algoritms.js","gui/ui/molecules/information-about-algoritm.js","gui/ui/organisms/history.js","gui/ui/organisms/info-block.js","gui/ui/organisms/code-area/model.js","gui/ui/organisms/code-area/code-string.js","gui/ui/organisms/code-area/index.js","App.js","global-css.js","index.js"],"names":["cellSize","pageWidth","window","innerWidth","pageHeight","innerHeight","borderSize","colorSchema","borderColor","blockColor","startEndColor","ceilType","START_POSITION","END_POSITION","BARIER","EMPTY","VISITED","getLocalSize","w","h","Math","floor","getGlobalSize","convertLocalPositionToGlobal","_ref","_ref2","Object","slicedToArray","x","y","drawSquare","_ref3","_ref3$color","color","position","context","width","_convertLocalPosition","_convertLocalPosition2","size","fillStyle","fillRect","getIndexByPosition","_ref4","_ref5","getPositionByIndex","index","drawSquareWithAnimation","params","animateId","_params$position","_params$scale","scale","requestAnimationFrame","objectSpread2","cancelAnimationFrame","drawMarkerWithAnimation","_params$width","_ref6","_ref6$color","_convertLocalPosition3","_convertLocalPosition4","strokeStyle","beginPath","moveTo","lineTo","stroke","drawMark","Barier","classCallCheck","this","canDrawe","canRemove","createClass","key","value","graphControll","Graph","graph","cellCount","lastIndex","canMoveDiagonal","clear","type","siblings","getSiblings","filter","item","left","getLeftSibling","top","getTopSibling","right","getRightSibling","down","getDownSibling","getTopLeftDiagonal","getTopRightDiagonal","getBotRightDiagonal","getBotLeftDiagonal","bot","_getLocalSize","setBarrierToGraph","barriers","forEach","barrier","updateGraph","getIndex","setStartPositionToGraph","startIndex","setEndPositionToGraph","endIndex","graphDomain","createDomain","resetStore","event","clearCanvas","changeDirection","setBarrier","removeBarrierItem","triggerStartPosition","triggerEndPosition","$startEndPosition","store","$canMoveDiagonal","$barriers","on","state","onCreateStore","reset","removedBarrier","guard","source","sample","clock","fn","find","Boolean","watch","remove","concat","toConsumableArray","removed","$graph","combine","startEndPosition","map","_state$startEndPositi","start","end","createGraph","canVisitedVertex","vertex","restorePath","parent","path","target","unshift","length","push","removeDoubleVertex","reduce","acc","row","el","some","accRow","includes","AlgoritmController","count","processing","visited","breadthFirstSearch","aInfo","prevIndex","isWork","queue","currentIndex","shift","addVertex","i","next","getVertexByIndex","increment","result","getAlgotitmResult","depthFirstSearch","stack","algoritmsDomain","selectAlgoritm","createEvent","addVisitedVertex","addProcessedVertex","addCustomAlgoritm","$currentAlgoritm","restore","$visitedVertex","$processedVertex","_","processed","$algoritms","createStore","searchFunction","name","modal","foo","algoritm","$searchAlgoritm","currentAlgoritm","algoritms","checkGameStatus","status","renderVisitedVertex","_getPositionByIndex","_getPositionByIndex2","renderVisitedVertexByArr","arguments","undefined","_getPositionByIndex3","_getPositionByIndex4","filtredFps","fps","fpsVariant","equal","nextGame","hasNewBarriers","nextBarriers","_state","checkBarriers","nextPosition","_position","equalPosition","lastPosition","apply","checkPosition","setGameStatus","gameStatus","END_GAME","START","RESTART","PAUSE","RESUME","CLEAR","RESET","gameDomain","setTimer","setHistoryGame","recoveryHistoryGame","setCurrentGame","$path","$historyGame","$currentTimer","date","Date","$currentGame","$gameState","startGame","resumeGame","endGame","restoredHistoryGame","sampleForHistoryGame","historyGame","game","_graph$startEndPositi","time","performance","now","timeEnd","tickFx","createEffect","use","Promise","rs","setTimeout","createTick","$state","$animationCount","tickWithParams","attach","effect","mapParams","$combineState","animationCount","done","animatedVisitedVertex","merge","_state$processing","_ref2$path","_ref2$color","prev","lineWidth","renderPath","canvasControl","Controll","isMouseDown","isMouseMove","listeners","disabledListeners","_this","disabledListener","includeListener","canvas","_this2","addEventListener","userEvent","eventListener","_getLocalSize3","clientX","clientY","getTargetIndex","init","gameState","$mainState","visitedVertex","processedVertex","renderCeil","renderForMove","renderForClick","renderLogic","_getLocalSize2","getState","findIndex","renderStart","renderEnd","document","getElementById","getContext","localSize","globalSize","gridData","grid","Path2D","applyStyles","buildGrid","render","clearRect","height","clearALlCanvas","setState","renderActionsCeil","renderBarrier","configureCanvas","registerClickEventToCanvas","addMouseMoveEvent","addMouseUpEvent","addMouseClickEvent","e","s","renderCanvas","ModalWrapper","isOpen","onRequestClose","children","react_default","a","createElement","lib_default","closeTimeoutMS","StyledRootWrapper","onClick","StyledWrapper","StyledInner","stopPropagation","CloseModal","ReactModal","setAppElement","styled","div","_templateObject","_templateObject2","_templateObject3","_templateObject4","Icon","icon_templateObject","Text","p","text_templateObject","Button","icon","_ref$size","_ref$variant","variant","_ref$color","style","fontSize","startIcon","FlexContainer","flex_wrapper_templateObject","direction","Left","flex_wrapper_templateObject2","Switch","label","_ref$name","rest","objectWithoutProperties","cursor","FormControlLabel","control","assign","Settings","_React$useState","React","useState","_React$useState2","setOpen","Fragment","icon_Icon","index_esm","Info","InfoModal","ColorBlock","info_templateObject","AboutAlgoritms","InfoAboutAlgoritmApi","codeString","_React$useReducer","useReducer","_React$useReducer2","toggle","default_button_Button","Wrapper","href","default_highlight","language","docco","information_about_algoritm_templateObject","css","information_about_algoritm_templateObject2","information_about_algoritm_templateObject3","History","useStore","HistoryIcon","historyCount","fa_index_esm","HistoryList","currentGame","handleChangeItem","useCallback","HistoryListWrapper","HistoryItem","active","toString","history_templateObject","history_templateObject2","history_templateObject3","history_templateObject4","_templateObject5","info_block_templateObject","InfoDraggable","react_draggable_default","info_block_Wrapper","handleChangeCode","$code","newAlg","newRe","newCan","newGraph","CodeArea","code","handleChangeAlgoritm","Function","onChange","$store","App","_store$timeEnd","_store$path","currentTimer","className","disabled","toFixed","GrResume","GrPause","GrPlay","GrClear","borderTop","TextField","parseInt","default_switch_Switch","checked","App_CustomAlgoritmModal","CustomAlgoritmModal","globalCss","global_css_templateObject","GlobalModalStyles","createGlobalStyle","global_css_templateObject2","__webpack_require__","d","__webpack_exports__","utils_canVisitedVertex","barrier_Barier","rootElement","ReactDOM"],"mappings":"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","file":"static/js/main.094cee05.chunk.js","sourcesContent":["export const cellSize = 35;\r\nexport const pageWidth = window.innerWidth;\r\nexport const pageHeight = window.innerHeight;\r\nexport const borderSize = 0.5;\r\nexport const boardLength = pageWidth * pageHeight;\r\nexport const startPosition = 0;\r\nexport const endPosition = 110;\r\n\r\nexport const colorSchema = {\r\n  borderColor: \"#000\",\r\n  blockColor: \"#bbbbbb\",\r\n  startEndColor: [\"green\", \"red\"],\r\n};\r\n\r\nexport const ceilType = {\r\n  START_POSITION: \"START_POSITION\",\r\n  END_POSITION: \"END_POSITION\",\r\n  BARIER: \"BARIER\",\r\n  EMPTY: \"EMPTY\",\r\n  VISITED: \"VISITED\",\r\n};\r\n\r\nexport function getLocalSize(w, h) {\r\n  return {\r\n    w: Math.floor(w / cellSize),\r\n    h: Math.floor(h / cellSize),\r\n  };\r\n}\r\n\r\nexport function getGlobalSize(w, h) {\r\n  return {\r\n    w: Math.floor(w * cellSize),\r\n    h: Math.floor(h * cellSize),\r\n  };\r\n}\r\n\r\nexport function convertLocalPositionToGlobal([x, y]) {\r\n  return [x * cellSize, y * cellSize];\r\n}\r\n\r\nexport function drawSquare({\r\n  color = \"rgb(152, 251, 152)\",\r\n  position,\r\n  context,\r\n  width,\r\n}) {\r\n  const [x, y] = convertLocalPositionToGlobal(position);\r\n  const size = width || cellSize - borderSize * 2;\r\n\r\n  context.fillStyle = color;\r\n  context.fillRect(x + borderSize * 2, y + borderSize * 2, size, size);\r\n}\r\n\r\nexport function clearALlCanvas(context, canvas) {\r\n  return context.clearRect(0, 0, canvas.width, canvas.height);\r\n}\r\n\r\nexport function getIndexByPosition([x, y]) {\r\n  const { w } = getLocalSize(pageWidth, pageHeight);\r\n\r\n  return y * w + x;\r\n}\r\n\r\nexport function getPositionByIndex(index) {\r\n  const { w } = getLocalSize(pageWidth, pageHeight);\r\n  const y = Math.floor(index / w);\r\n  const x = index - y * w;\r\n\r\n  return [x, y];\r\n}\r\n\r\nexport function getTargetIndex(event) {\r\n  const { w, h } = getLocalSize(event.clientX, event.clientY);\r\n  const index = getIndexByPosition([w, h]);\r\n\r\n  return index;\r\n}\r\n\r\nexport function drawMark({ color = \"#e84a4a\", position, context }) {\r\n  const [x, y] = convertLocalPositionToGlobal(position);\r\n\r\n  context.strokeStyle = color;\r\n\r\n  context.beginPath();\r\n  context.moveTo(x + 10, y + 10);\r\n  context.lineTo(x + cellSize - 10, y + cellSize - 10);\r\n  context.stroke();\r\n\r\n  context.beginPath();\r\n  context.moveTo(x + cellSize - 10, y + 10);\r\n  context.lineTo(x + 10, y + cellSize - 10);\r\n  context.stroke();\r\n}\r\n","import { drawSquare, drawMark, cellSize } from \"../config\";\r\n\r\nexport function drawSquareWithAnimation(params) {\r\n  let animateId;\r\n  let {\r\n    position: [x, y],\r\n    width,\r\n    scale = 0.3,\r\n  } = params;\r\n\r\n  if (width < cellSize) {\r\n    animateId = requestAnimationFrame(() =>\r\n      drawSquareWithAnimation({\r\n        ...params,\r\n        width,\r\n        scale,\r\n      })\r\n    );\r\n\r\n    drawSquare({\r\n      ...params,\r\n      position: [x + scale, y + scale],\r\n    });\r\n\r\n    if (scale > 0 && width % 5 === 0) {\r\n      scale = scale - 0.1;\r\n    }\r\n\r\n    width++;\r\n  } else {\r\n    cancelAnimationFrame(animateId);\r\n  }\r\n}\r\n\r\nexport function drawMarkerWithAnimation(params) {\r\n  let { width = cellSize - 10 } = params;\r\n  let animateId;\r\n\r\n  if (width < cellSize) {\r\n    animateId = requestAnimationFrame(() =>\r\n      drawMarkerWithAnimation({\r\n        ...params,\r\n        width,\r\n      })\r\n    );\r\n\r\n    drawMark({\r\n      ...params,\r\n      width,\r\n    });\r\n\r\n    width++;\r\n  } else {\r\n    drawSquare({\r\n      ...params,\r\n      color: \"#fff\",\r\n      width: 0,\r\n    });\r\n\r\n    cancelAnimationFrame(animateId);\r\n  }\r\n}\r\n","import { getPositionByIndex, drawSquare, colorSchema } from \"../config\";\r\nimport { drawSquareWithAnimation, drawMarkerWithAnimation } from \"./animations\";\r\n\r\nexport class Barier {\r\n  constructor(index) {\r\n    this.index = index;\r\n    this.canDrawe = false;\r\n    this.context = null;\r\n    this.canRemove = false;\r\n    this.position = false;\r\n  }\r\n\r\n  getBarier() {\r\n    return this;\r\n  }\r\n\r\n  getIndex() {\r\n    return this.index;\r\n  }\r\n\r\n  render(context) {\r\n    this.context = context;\r\n    this.position = getPositionByIndex(this.index);\r\n\r\n    if (!this.canRemove) {\r\n      if (!this.canDrawe) {\r\n        drawSquareWithAnimation({\r\n          position: this.position,\r\n          context,\r\n          color: colorSchema.blockColor,\r\n          width: 20,\r\n        });\r\n      } else {\r\n        drawSquare({\r\n          position: this.position,\r\n          context,\r\n          color: colorSchema.blockColor,\r\n        });\r\n      }\r\n\r\n      this.canDrawe = true;\r\n    }\r\n  }\r\n\r\n  remove() {\r\n    this.canRemove = true;\r\n\r\n    drawMarkerWithAnimation({\r\n      position: this.position,\r\n      context: this.context,\r\n    });\r\n\r\n    this.canRemove = false;\r\n  }\r\n}\r\n","import { ceilType, pageWidth, getLocalSize, pageHeight } from \"../config\";\r\n\r\nclass Graph {\r\n  constructor({ w, h }) {\r\n    this.graph = {};\r\n    this.cellCount = w * h;\r\n    this.lastIndex = null;\r\n  }\r\n\r\n  createGraph(canMoveDiagonal) {\r\n    this.clear();\r\n    for (let index = 0; index < this.cellCount; index++) {\r\n      this.graph[index] = {\r\n        type: ceilType.EMPTY,\r\n        siblings: this.getSiblings(index, canMoveDiagonal).filter(\r\n          (item) => typeof item !== \"undefined\"\r\n        ),\r\n      };\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  getVertexByIndex(index) {\r\n    return this.graph[index];\r\n  }\r\n\r\n  updateGraph({ index, type }) {\r\n    if (this.graph[index]) {\r\n      this.graph[index] = { ...this.graph[index], type };\r\n      if (type === ceilType.BARIER) {\r\n        this.graph[index] = { ...this.graph[index], type, siblings: [] };\r\n      }\r\n    }\r\n  }\r\n\r\n  getSiblings(index, canMoveDiagonal) {\r\n    const left = this.getLeftSibling(index);\r\n    const top = this.getTopSibling(index);\r\n    const right = this.getRightSibling(index);\r\n    const down = this.getDownSibling(index);\r\n\r\n    if (canMoveDiagonal) {\r\n      const topLeft = this.getTopLeftDiagonal(top, left);\r\n      const topRight = this.getTopRightDiagonal(top, right);\r\n      const botRight = this.getBotRightDiagonal(down, right);\r\n      const botLeft = this.getBotLeftDiagonal(down, left);\r\n\r\n      return [topLeft, top, topRight, right, botRight, down, botLeft, left];\r\n    }\r\n\r\n    return [top, left, down, right];\r\n  }\r\n\r\n  getTopLeftDiagonal(top, left) {\r\n    if (top >= 0 && left >= 0) {\r\n      return top - 1;\r\n    }\r\n  }\r\n\r\n  getTopRightDiagonal(top, right) {\r\n    if (top >= 0 && right >= 0) {\r\n      return top + 1;\r\n    }\r\n  }\r\n\r\n  getBotLeftDiagonal(bot, left) {\r\n    if (bot >= 0 && left >= 0) {\r\n      return bot - 1;\r\n    }\r\n  }\r\n\r\n  getBotRightDiagonal(bot, right) {\r\n    if (bot >= 0 && right) {\r\n      return bot + 1;\r\n    }\r\n  }\r\n\r\n  getBottomDiagonal(down) {\r\n    const left = down - 1;\r\n    const right = down + 1;\r\n\r\n    return [left, right];\r\n  }\r\n\r\n  getDownSibling(index) {\r\n    const { w, h } = getLocalSize(pageWidth, pageHeight);\r\n\r\n    const hasDownNeighbour = Math.floor(index / w) < h - 1;\r\n\r\n    if (hasDownNeighbour) {\r\n      return index + w;\r\n    }\r\n  }\r\n\r\n  getTopSibling(index) {\r\n    const { w } = getLocalSize(pageWidth, pageHeight);\r\n\r\n    const hasTopNeighbour = Math.floor(index / w) > 0;\r\n\r\n    if (hasTopNeighbour) {\r\n      return index - w;\r\n    }\r\n  }\r\n\r\n  getRightSibling(index) {\r\n    const { w } = getLocalSize(pageWidth, pageHeight);\r\n\r\n    const hasRightNeighbour = index % w < w - 1;\r\n\r\n    if (hasRightNeighbour) {\r\n      return index + 1;\r\n    }\r\n  }\r\n\r\n  getLeftSibling(index) {\r\n    const { w } = getLocalSize(pageWidth, pageHeight);\r\n\r\n    const hasLeftNeighbour = index % w > 0;\r\n\r\n    if (hasLeftNeighbour) {\r\n      return index - 1;\r\n    }\r\n  }\r\n\r\n  getGraph() {\r\n    return this.graph;\r\n  }\r\n\r\n  clear() {\r\n    this.graph = {};\r\n    return this;\r\n  }\r\n}\r\n\r\nexport const graphControll = new Graph(getLocalSize(pageWidth, pageHeight));\r\n","import { ceilType } from \"../config\";\r\n\r\nexport function setBarrierToGraph(graph, barriers) {\r\n  barriers.forEach((barrier) => {\r\n    graph.updateGraph({ index: barrier.getIndex(), type: ceilType.BARIER });\r\n  });\r\n}\r\n\r\nexport function setStartPositionToGraph(graph, startIndex) {\r\n  graph.updateGraph({ index: startIndex, type: ceilType.START_POSITION });\r\n}\r\n\r\nexport function setEndPositionToGraph(graph, endIndex) {\r\n  graph.updateGraph({ index: endIndex, type: ceilType.END_POSITION });\r\n}\r\n","import { combine, createDomain, sample, guard } from \"effector\";\r\nimport { startPosition, endPosition } from \"../config\";\r\nimport { graphControll } from \"./controller\";\r\nimport {\r\n  setBarrierToGraph,\r\n  setStartPositionToGraph,\r\n  setEndPositionToGraph,\r\n} from \"./utils\";\r\nimport { Barier } from \"../game\";\r\n\r\nconst graphDomain = createDomain(\"graph\");\r\n\r\nexport const resetStore = graphDomain.event();\r\nexport const clearCanvas = graphDomain.event();\r\n\r\nexport const changeDirection = graphDomain.event();\r\nexport const setBarrier = graphDomain.event();\r\nexport const removeBarrierItem = graphDomain.event();\r\n\r\nexport const triggerStartPosition = graphDomain.event();\r\nexport const triggerEndPosition = graphDomain.event();\r\n\r\nexport const $startEndPosition = graphDomain.store([\r\n  startPosition,\r\n  endPosition,\r\n]);\r\n\r\nexport const $canMoveDiagonal = graphDomain.store(false);\r\n\r\nexport const $barriers = graphDomain.store([]);\r\n\r\n$canMoveDiagonal.on(changeDirection, (state) => !state);\r\n\r\ngraphDomain.onCreateStore((store) => store.reset(resetStore));\r\n\r\nexport const removedBarrier = guard({\r\n  source: sample({\r\n    source: $barriers,\r\n    clock: removeBarrierItem,\r\n    fn: (state, index) => state.find((item) => item.getIndex() === index),\r\n  }),\r\n  filter: Boolean,\r\n});\r\n\r\nremovedBarrier.watch((item) => item.remove());\r\n\r\n$barriers\r\n  .on(setBarrier, (state, index) => {\r\n    const barrier = new Barier(index);\r\n\r\n    const isFindIndex = state.find((item) => item.getIndex() === index);\r\n\r\n    return isFindIndex ? state : [...state, barrier];\r\n  })\r\n  .on(removedBarrier, (state, removed) =>\r\n    state.filter((item) => item !== removed)\r\n  );\r\n\r\n$startEndPosition\r\n  .on(triggerStartPosition, (state, index) => [index, state[1]])\r\n  .on(triggerEndPosition, (state, index) => [state[0], index]);\r\n\r\nexport const $graph = combine({\r\n  barrier: $barriers,\r\n  startEndPosition: $startEndPosition,\r\n  canMoveDiagonal: $canMoveDiagonal,\r\n}).map((state) => {\r\n  const [start, end] = state.startEndPosition;\r\n\r\n  const graph = graphControll.createGraph(state.canMoveDiagonal);\r\n\r\n  setBarrierToGraph(graph, state.barrier);\r\n  setStartPositionToGraph(graph, start);\r\n  setEndPositionToGraph(graph, end);\r\n\r\n  return { ...state, graph: graph.graph };\r\n});\r\n","import { ceilType } from \"../config\";\r\n\r\nexport const canVisitedVertex = (vertex) => {\r\n  if (vertex.type !== ceilType.BARIER) {\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport function restorePath(endIndex, startIndex, parent) {\r\n  const path = [];\r\n  let target = parent[endIndex];\r\n\r\n  while (target && target !== startIndex) {\r\n    path.unshift(target);\r\n    target = parent[target];\r\n  }\r\n\r\n  if (path.length > 0) {\r\n    path.push(endIndex);\r\n  }\r\n\r\n  path.unshift(startIndex);\r\n\r\n  return path;\r\n}\r\n\r\nexport function removeDoubleVertex(target) {\r\n  return target.reduce((acc, row) => {\r\n    acc.push(row.filter((el) => !acc.some((accRow) => accRow.includes(el))));\r\n    return acc;\r\n  }, []);\r\n}\r\n","export class AlgoritmController {\r\n  constructor(startIndex, endIndex) {\r\n    this.count = 0;\r\n    this.processing = [];\r\n    this.visited = [];\r\n    this.startIndex = startIndex;\r\n    this.endIndex = endIndex;\r\n  }\r\n\r\n  increment() {\r\n    this.count++;\r\n  }\r\n\r\n  addVertex(processing, visited) {\r\n    this.processing.push(processing);\r\n    this.visited.push(visited);\r\n  }\r\n\r\n  getAlgotitmResult() {\r\n    return this;\r\n  }\r\n}\r\n","import { graphControll } from \"../graph\";\r\nimport { canVisitedVertex, restorePath } from \"./utils\";\r\nimport { AlgoritmController } from \"./controller\";\r\n\r\nexport function breadthFirstSearch(startIndex, endIndex, graph) {\r\n  const aInfo = new AlgoritmController(startIndex, endIndex);\r\n  let prevIndex = null;\r\n  let isWork = true;\r\n  const queue = [startIndex];\r\n  const visited = [startIndex];\r\n  const parent = {};\r\n\r\n  while (isWork && queue.length > 0) {\r\n    const currentIndex = queue.shift();\r\n\r\n    aInfo.addVertex(\r\n      {\r\n        vertex: currentIndex,\r\n        siblings: graph[currentIndex].siblings,\r\n      },\r\n      prevIndex\r\n    );\r\n\r\n    for (let i = 0; i < graph[currentIndex].siblings.length; i++) {\r\n      const next = graph[currentIndex].siblings[i];\r\n\r\n      const vertex = graphControll.getVertexByIndex(next);\r\n\r\n      if (!visited.includes(next) && canVisitedVertex(vertex)) {\r\n        queue.push(next);\r\n        visited.push(next);\r\n\r\n        parent[next] = currentIndex;\r\n        aInfo.increment();\r\n      }\r\n      prevIndex = currentIndex;\r\n      if (next === endIndex) {\r\n        isWork = false;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  const result = aInfo.getAlgotitmResult();\r\n  const path = restorePath(endIndex, startIndex, parent);\r\n\r\n  return {\r\n    path,\r\n    ...result,\r\n  };\r\n}\r\n","import { graphControll } from \"../graph\";\r\nimport { canVisitedVertex, restorePath } from \"./utils\";\r\nimport { AlgoritmController } from \"./controller\";\r\n\r\nexport function depthFirstSearch(startIndex, endIndex, graph) {\r\n  const aInfo = new AlgoritmController(startIndex, endIndex);\r\n\r\n  let isWork = true;\r\n  const stack = [startIndex];\r\n  const visited = [];\r\n  const parent = {};\r\n  let prevIndex = null;\r\n\r\n  while (isWork && stack.length > 0) {\r\n    const currentIndex = stack.shift();\r\n\r\n    aInfo.addVertex(\r\n      {\r\n        vertex: currentIndex,\r\n        siblings: graph[currentIndex].siblings,\r\n      },\r\n      prevIndex\r\n    );\r\n\r\n    for (let i = 0; i < graph[currentIndex].siblings.length; i++) {\r\n      const next = graph[currentIndex].siblings[i];\r\n      const vertex = graphControll.getVertexByIndex(next);\r\n\r\n      if (!visited.includes(next) && canVisitedVertex(vertex)) {\r\n        stack.unshift(next);\r\n        visited.push(next);\r\n\r\n        parent[next] = currentIndex;\r\n        aInfo.increment();\r\n      }\r\n\r\n      if (next === endIndex) {\r\n        isWork = false;\r\n        break;\r\n      }\r\n    }\r\n    prevIndex = currentIndex;\r\n  }\r\n\r\n  const result = aInfo.getAlgotitmResult();\r\n  const path = restorePath(endIndex, startIndex, parent);\r\n\r\n  return {\r\n    path,\r\n    ...result,\r\n  };\r\n}\r\n","import {\r\n  createStore,\r\n  combine,\r\n  createEvent,\r\n  restore,\r\n  createDomain,\r\n} from \"effector\";\r\nimport { breadthFirstSearch } from \"./bred-first-search\";\r\nimport { depthFirstSearch } from \"./depth-first-search\";\r\nimport { clearCanvas, resetStore } from \"../graph\";\r\nimport { setGameStatus, gameStatus } from \"../game\";\r\n\r\nconst algoritmsDomain = createDomain();\r\n\r\nexport const selectAlgoritm = createEvent();\r\nexport const addVisitedVertex = createEvent();\r\nexport const addProcessedVertex = createEvent();\r\nexport const addCustomAlgoritm = createEvent();\r\n\r\nexport const $currentAlgoritm = restore(selectAlgoritm, \"bredth first search\");\r\nexport const $visitedVertex = algoritmsDomain.store([]);\r\nexport const $processedVertex = algoritmsDomain.store({\r\n  vertex: null,\r\n  siblings: [],\r\n});\r\n\r\n$visitedVertex.on(addVisitedVertex, (state, vertex) => [...state, vertex]);\r\n$processedVertex.on(addProcessedVertex, (_, processed) => processed);\r\n\r\nexport const $algoritms = createStore([\r\n  {\r\n    searchFunction: breadthFirstSearch,\r\n    name: \"bredth first search\",\r\n  },\r\n  {\r\n    searchFunction: depthFirstSearch,\r\n    name: \"depth first search\",\r\n  },\r\n  {\r\n    searchFunction: null,\r\n    name: \"custom function\",\r\n    modal: true,\r\n  },\r\n]).on(addCustomAlgoritm, (state, foo) =>\r\n  state.map((algoritm) =>\r\n    algoritm.name === \"custom function\"\r\n      ? { ...algoritm, searchFunction: foo }\r\n      : algoritm\r\n  )\r\n);\r\n\r\nexport const $searchAlgoritm = combine(\r\n  $currentAlgoritm,\r\n  $algoritms,\r\n  (currentAlgoritm, algoritms) =>\r\n    algoritms.find((algoritm) => algoritm.name === currentAlgoritm)\r\n);\r\n\r\nalgoritmsDomain.onCreateStore((store) => store.reset(clearCanvas, resetStore));\r\n\r\nselectAlgoritm.watch(() => setGameStatus(gameStatus.END_GAME));\r\n","import { getPositionByIndex, drawSquare } from \"../config\";\r\n\r\nexport function checkGameStatus(target, status) {\r\n  return status.some((item) => target === item);\r\n}\r\n\r\nexport function renderVisitedVertex(barrier, context, color) {\r\n  if (barrier) {\r\n    const [x, y] = getPositionByIndex(barrier);\r\n    drawSquare({\r\n      position: [x, y],\r\n      context,\r\n      color,\r\n    });\r\n  }\r\n}\r\n\r\nexport function renderVisitedVertexByArr(barrier, context, color = \"#000\") {\r\n  for (let i = 0; i < barrier.length; i++) {\r\n    const [x, y] = getPositionByIndex(barrier[i]);\r\n    drawSquare({\r\n      position: [x, y],\r\n      context,\r\n      color,\r\n    });\r\n  }\r\n}\r\n\r\nexport function filtredFps(_, fps) {\r\n  const fpsVariant = {\r\n    min: 1,\r\n    max: 30,\r\n  };\r\n\r\n  if (fps < fpsVariant.min) {\r\n    return fpsVariant.min;\r\n  }\r\n  if (fps >= fpsVariant.max) {\r\n    return fpsVariant.max;\r\n  }\r\n  return fps;\r\n}\r\n\r\nexport function equal(state, nextGame) {\r\n  const hasNewBarriers = checkBarriers(state, nextGame.barrier);\r\n  const hasNewPosition = checkPosition(state, nextGame.startEndPosition);\r\n\r\n  if (hasNewPosition || hasNewBarriers) {\r\n    return true;\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction checkBarriers(state, nextBarriers) {\r\n  if (nextBarriers.length === 0) {\r\n    return false;\r\n  }\r\n\r\n  if (state[state.length - 1]?.barrier.length !== nextBarriers?.length) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\nfunction checkPosition(position, nextPosition) {\r\n  const equalPosition = [];\r\n  const lastPosition = position[position.length - 1]?.startEndPosition;\r\n\r\n  if (!lastPosition) {\r\n    return true;\r\n  }\r\n\r\n  equalPosition.push(\r\n    ...lastPosition.map((position, index) => {\r\n      return position !== nextPosition[index];\r\n    })\r\n  );\r\n\r\n  if (equalPosition.length === 0 || equalPosition.includes(true)) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n","import { sample, guard, restore, createDomain } from \"effector\";\r\nimport {\r\n  $graph,\r\n  resetStore,\r\n  clearCanvas,\r\n  $barriers,\r\n  $startEndPosition,\r\n} from \"../graph\";\r\nimport { $searchAlgoritm } from \"../algoritms/model\";\r\nimport { equal, filtredFps } from \"./utils\";\r\n\r\nexport const gameStatus = {\r\n  START: \"START\",\r\n  RESTART: \"RESTART\",\r\n  PAUSE: \"PAUSE\",\r\n  RESUME: \"RESUME\",\r\n  CLEAR: \"CLEAR\",\r\n  END_GAME: \"END_GAME\",\r\n  RESET: \"RESET\",\r\n};\r\n\r\nconst gameDomain = createDomain(\"game\");\r\n\r\nexport const setGameStatus = gameDomain.event();\r\nexport const setTimer = gameDomain.event();\r\nexport const setHistoryGame = gameDomain.event();\r\nexport const recoveryHistoryGame = gameDomain.event();\r\nexport const setCurrentGame = gameDomain.event();\r\n\r\nexport const $path = gameDomain.store({}).reset(resetStore, clearCanvas);\r\nexport const $historyGame = gameDomain.store([]);\r\nexport const $currentTimer = gameDomain.store(15).on(setTimer, filtredFps);\r\n\r\n$historyGame.on(setHistoryGame, (state, { barrier, startEndPosition }) => {\r\n  const nextGame = { barrier, startEndPosition, date: new Date() };\r\n  const findedGame = equal(state, nextGame);\r\n\r\n  return findedGame ? [...state, nextGame] : state;\r\n});\r\n\r\nexport const $currentGame = restore(setCurrentGame, null).reset(\r\n  resetStore,\r\n  clearCanvas\r\n);\r\n\r\nexport const $gameState = restore(setGameStatus, gameStatus.RESET).reset(\r\n  resetStore\r\n);\r\n\r\nexport const startGame = guard({\r\n  source: $gameState,\r\n  filter: $gameState.map((state) => state === gameStatus.START),\r\n});\r\n\r\nexport const resumeGame = guard({\r\n  source: $gameState,\r\n  filter: $gameState.map((state) => state === gameStatus.RESUME),\r\n});\r\n\r\nexport const endGame = guard({\r\n  source: $gameState,\r\n  filter: $gameState.map((state) => state === gameStatus.END_GAME),\r\n});\r\n\r\nconst restoredHistoryGame = guard({\r\n  source: recoveryHistoryGame,\r\n  filter: $gameState.map((state) => state === gameStatus.END_GAME),\r\n});\r\n\r\nguard({\r\n  source: $gameState,\r\n  filter: $gameState.map((state) => state === gameStatus.CLEAR),\r\n  target: resetStore,\r\n});\r\n\r\nguard({\r\n  source: $gameState,\r\n  filter: $gameState.map((state) => state === gameStatus.START),\r\n  target: clearCanvas,\r\n});\r\n\r\nsample({\r\n  source: $graph,\r\n  clock: endGame,\r\n  target: setHistoryGame,\r\n});\r\n\r\nsample({\r\n  source: {\r\n    graph: $graph,\r\n    algoritm: $searchAlgoritm,\r\n  },\r\n  clock: startGame,\r\n  target: $path,\r\n  fn: ({ graph, algoritm }) => {\r\n    const [start, end] = graph.startEndPosition;\r\n\r\n    const time = window.performance.now();\r\n    // const result = {\r\n    //   count: 0,\r\n    //   endIndex: null,\r\n    //   startIndex: null,\r\n    //   path: [],\r\n    //   visited: [],\r\n    //   processing: [],\r\n    // };\r\n    // algoritm.searchFunction(start, end, graph.graph);\r\n    const result = algoritm.searchFunction(start, end, graph.graph);\r\n    const timeEnd = window.performance.now() - time;\r\n\r\n    return {\r\n      ...result,\r\n      timeEnd,\r\n    };\r\n  },\r\n});\r\n\r\nsampleForHistoryGame($barriers, \"barrier\");\r\nsampleForHistoryGame($startEndPosition, \"startEndPosition\");\r\nsampleForHistoryGame($currentGame, \"date\");\r\n\r\nfunction sampleForHistoryGame(target, key) {\r\n  return sample({\r\n    source: $historyGame,\r\n    clock: restoredHistoryGame,\r\n    target,\r\n    fn: (historyGame, params) => {\r\n      const findedGame = historyGame.find((game) => game.date === params);\r\n\r\n      return findedGame[key];\r\n    },\r\n  });\r\n}\r\n","import {\r\n  createEffect,\r\n  attach,\r\n  createStore,\r\n  sample,\r\n  guard,\r\n  combine,\r\n  merge,\r\n} from \"effector\";\r\nimport { renderPath } from \"../canvas\";\r\nimport { addVisitedVertex, addProcessedVertex } from \"../algoritms\";\r\nimport { clearCanvas, resetStore } from \"../graph\";\r\nimport { checkGameStatus } from \"./utils\";\r\nimport {\r\n  gameStatus,\r\n  setGameStatus,\r\n  $gameState,\r\n  $currentTimer,\r\n  startGame,\r\n  resumeGame,\r\n} from \"./model\";\r\n\r\nconst tickFx = createEffect().use(\r\n  (fps) => new Promise((rs) => setTimeout(rs, 1000 / (fps * 2)))\r\n);\r\n\r\nexport function createTick($state, context) {\r\n  const $animationCount = createStore(0).reset(clearCanvas, resetStore);\r\n\r\n  const tickWithParams = attach({\r\n    effect: tickFx,\r\n    source: $currentTimer,\r\n    mapParams: (_, fps) => fps,\r\n  });\r\n\r\n  const $combineState = combine(\r\n    $state,\r\n    $animationCount,\r\n    (state, animationCount) => ({ state, animationCount })\r\n  );\r\n\r\n  $animationCount.on(tickWithParams.done, (state) => state + 1);\r\n\r\n  sample($combineState, tickWithParams).watch((state) => {\r\n    animatedVisitedVertex(state, context);\r\n  });\r\n\r\n  guard({\r\n    source: merge([startGame, resumeGame, tickWithParams.done]),\r\n    filter: $gameState.map((state) =>\r\n      checkGameStatus(state, [gameStatus.RESUME, gameStatus.START])\r\n    ),\r\n    target: tickWithParams,\r\n  });\r\n}\r\n\r\nexport function animatedVisitedVertex({ animationCount, state }, context) {\r\n  const { processing = [] } = state;\r\n\r\n  if (animationCount < processing.length) {\r\n    addProcessedVertex(processing[animationCount]);\r\n\r\n    if (processing[animationCount - 1]) {\r\n      addVisitedVertex(processing[animationCount - 1].vertex);\r\n    }\r\n  } else {\r\n    setGameStatus(gameStatus.END_GAME);\r\n\r\n    renderPath({\r\n      path: state.path,\r\n      context,\r\n    });\r\n  }\r\n}\r\n","import { guard, sample, merge, combine, forward } from \"effector\";\r\nimport {\r\n  colorSchema,\r\n  cellSize,\r\n  pageHeight,\r\n  pageWidth,\r\n  borderSize,\r\n  getLocalSize,\r\n  getGlobalSize,\r\n  drawSquare,\r\n  clearALlCanvas,\r\n  getPositionByIndex,\r\n  getIndexByPosition,\r\n  ceilType,\r\n  convertLocalPositionToGlobal,\r\n} from \"./config\";\r\nimport { configureCanvas } from \"./config-canvas\";\r\nimport { canvasControl } from \"./control-canvas\";\r\nimport {\r\n  setBarrier,\r\n  removeBarrierItem,\r\n  triggerStartPosition,\r\n  triggerEndPosition,\r\n  $graph,\r\n  resetStore,\r\n  clearCanvas,\r\n} from \"./graph\";\r\n\r\nimport {\r\n  gameStatus,\r\n  $gameState,\r\n  $path,\r\n  renderVisitedVertexByArr,\r\n  renderVisitedVertex,\r\n  createTick,\r\n} from \"./game\";\r\nimport { $visitedVertex, $processedVertex } from \"./algoritms\";\r\n\r\nconst $algoritState = combine({\r\n  gameState: $gameState,\r\n  path: $path,\r\n});\r\n\r\nconst $mainState = combine({\r\n  visitedVertex: $visitedVertex,\r\n  graph: $graph,\r\n  processedVertex: $processedVertex,\r\n});\r\n\r\nexport function renderBarrier(barrier, context) {\r\n  for (let i = 0; i < barrier.length; i++) {\r\n    barrier[i].render(context);\r\n  }\r\n}\r\n\r\nfunction renderActionsCeil(startEndPosition, context) {\r\n  for (let i = 0; i < startEndPosition.length; i++) {\r\n    const index = getPositionByIndex(startEndPosition[i]);\r\n    drawSquare({\r\n      position: index,\r\n      context,\r\n      color: colorSchema.startEndColor[i],\r\n    });\r\n  }\r\n}\r\n\r\nfunction renderCeil(event, state) {\r\n  const { w, h } = getLocalSize(event.clientX, event.clientY);\r\n  const index = getIndexByPosition([w, h]);\r\n\r\n  const [startIndex, endIndex] = state.startEndPosition;\r\n\r\n  return {\r\n    renderForMove: () => {\r\n      if (index !== startIndex && index !== endIndex) {\r\n        setBarrier(index);\r\n      }\r\n    },\r\n    renderForClick: () => {\r\n      if (index !== startIndex && index !== endIndex) {\r\n        removeBarrierItem(index);\r\n      }\r\n    },\r\n  };\r\n}\r\n\r\nfunction renderStart(index, state) {\r\n  const findIndex = state.barrier.find((barrier) => barrier.index === index);\r\n  const [, endIndex] = state.startEndPosition;\r\n\r\n  if (!findIndex && index !== endIndex) {\r\n    triggerStartPosition(index);\r\n  }\r\n}\r\n\r\nfunction renderEnd(index, state) {\r\n  const findIndex = state.barrier.find((barrier) => barrier.index === index);\r\n  const [startIndex] = state.startEndPosition;\r\n\r\n  if (!findIndex && index !== startIndex) {\r\n    triggerEndPosition(index);\r\n  }\r\n}\r\n\r\nlet type = null;\r\nfunction renderLogic(event) {\r\n  const { w, h } = getLocalSize(event.clientX, event.clientY);\r\n  const index = getIndexByPosition([w, h]);\r\n  const state = $graph.getState();\r\n\r\n  if (!type) {\r\n    type = state.graph[index].type;\r\n  }\r\n\r\n  switch (type) {\r\n    case ceilType.BARIER:\r\n      return renderCeil(event, state).renderForClick();\r\n    case ceilType.START_POSITION:\r\n      return renderStart(index, state);\r\n    case ceilType.END_POSITION:\r\n      return renderEnd(index, state);\r\n    case ceilType.EMPTY:\r\n      return renderCeil(event, state).renderForMove();\r\n  }\r\n}\r\n\r\nexport function renderCanvas(canvas, context) {\r\n  const localSize = getLocalSize(pageWidth, pageHeight);\r\n  const globalSize = getGlobalSize(localSize.w, localSize.h);\r\n  const gridData = buildGrid(context);\r\n\r\n  configureCanvas(canvas, globalSize);\r\n\r\n  canvasControl.registerClickEventToCanvas(canvas);\r\n  canvasControl.addMouseMoveEvent(renderLogic);\r\n  canvasControl.addMouseUpEvent(() => (type = null));\r\n  canvasControl.addMouseClickEvent((e, s) => renderCeil(e, s).renderForClick());\r\n\r\n  function render({ graph, visitedVertex, processedVertex }) {\r\n    clearALlCanvas(context, canvas);\r\n    canvasControl.setState(graph);\r\n    renderVisitedVertexByArr(processedVertex.siblings, context, \"#d2ef99\");\r\n    renderVisitedVertex(processedVertex.vertex, context, \"#f3fc23\");\r\n\r\n    renderVisitedVertexByArr(visitedVertex, context, \"#00bcd4\");\r\n    renderActionsCeil(graph.startEndPosition, context);\r\n    renderBarrier(graph.barrier, context);\r\n\r\n    gridData.applyStyles();\r\n    context.stroke(gridData.grid);\r\n  }\r\n\r\n  $mainState.watch(render);\r\n\r\n  sample({\r\n    source: $mainState,\r\n    clock: merge([resetStore, clearCanvas]),\r\n  }).watch(render);\r\n\r\n  createTick($path, context);\r\n}\r\n\r\nlet prev = null;\r\nexport function renderPath({ context, path = [], color = \"green\" }) {\r\n  for (let i = 0; i < path.length; i++) {\r\n    const position = getPositionByIndex(path[i]);\r\n    const [x, y] = convertLocalPositionToGlobal(position);\r\n\r\n    if (prev) {\r\n      context.beginPath();\r\n      context.strokeStyle = color;\r\n      context.lineWidth = 2;\r\n      context.moveTo(prev[0], prev[1]);\r\n      context.lineTo(x + cellSize / 2, y + cellSize / 2);\r\n      context.stroke();\r\n    }\r\n\r\n    prev = [x + cellSize / 2, y + cellSize / 2];\r\n  }\r\n\r\n  prev = null;\r\n}\r\n\r\nfunction buildGrid(context) {\r\n  const grid = new Path2D();\r\n\r\n  const localSize = getLocalSize(pageWidth, pageHeight);\r\n  const globalSize = getGlobalSize(localSize.w, localSize.h);\r\n\r\n  for (let i = 0; i <= localSize.w; i++) {\r\n    grid.moveTo(i * cellSize + borderSize, 0);\r\n    grid.lineTo(i * cellSize + borderSize, globalSize.h);\r\n  }\r\n\r\n  for (let i = 0; i <= localSize.h; i++) {\r\n    grid.moveTo(0, i * cellSize + borderSize);\r\n    grid.lineTo(globalSize.w, i * cellSize + borderSize);\r\n  }\r\n\r\n  return {\r\n    grid,\r\n    applyStyles: () => {\r\n      context.lineWidth = borderSize;\r\n      context.strokeStyle = colorSchema.borderColor;\r\n    },\r\n  };\r\n}\r\n\r\nconst canvas = document.getElementById(\"viewport\");\r\n\r\nif (canvas) {\r\n  const context = canvas.getContext(\"2d\");\r\n\r\n  renderCanvas(canvas, context);\r\n}\r\n","import { getTargetIndex } from \"./config\";\r\nimport { $gameState, gameStatus, checkGameStatus } from \"./game\";\r\n\r\nclass Controll {\r\n  constructor() {\r\n    this.isMouseDown = false;\r\n    this.isMouseMove = false;\r\n    this.listeners = [];\r\n    this.state = {};\r\n    this.lastIndex = null;\r\n    this.disabledListeners = [];\r\n  }\r\n\r\n  init() {\r\n    $gameState.watch((state) => {\r\n      if (\r\n        checkGameStatus(state, [\r\n          gameStatus.START,\r\n          gameStatus.PAUSE,\r\n          gameStatus.RESUME,\r\n        ])\r\n      ) {\r\n        this.disabledListener();\r\n      } else {\r\n        this.includeListener();\r\n      }\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  registerClickEventToCanvas(canvas) {\r\n    canvas.addEventListener(\"mousedown\", (event) => {\r\n      this.listeners\r\n        .filter((userEvent) => userEvent.type === \"mousedown\")\r\n        .forEach((userEvent) => userEvent.eventListener());\r\n\r\n      this.isMouseDown = true;\r\n      this.isMouseMove = false;\r\n    });\r\n\r\n    canvas.addEventListener(\"mouseup\", (event) => {\r\n      this.isMouseDown = false;\r\n      this.listeners\r\n        .filter((userEvent) => userEvent.type === \"mouseup\")\r\n        .forEach((userEvent) => userEvent.eventListener(event, this.state));\r\n    });\r\n\r\n    canvas.addEventListener(\"click\", (event) => {\r\n      this.listeners\r\n        .filter((userEvent) => userEvent.type === \"click\")\r\n        .forEach((userEvent) => {\r\n          if (!this.isMouseMove) {\r\n            userEvent.eventListener(event, this.state);\r\n          }\r\n        });\r\n    });\r\n\r\n    canvas.addEventListener(\"mousemove\", (event) => {\r\n      const index = getTargetIndex(event);\r\n\r\n      if (this.isMouseDown && index !== this.lastIndex) {\r\n        this.lastIndex = index;\r\n        this.isMouseMove = true;\r\n        this.listeners\r\n          .filter((userEvent) => userEvent.type === \"mousemove\")\r\n          .forEach((userEvent) =>\r\n            userEvent.eventListener(event, this.state, this.lastIndex)\r\n          );\r\n      }\r\n    });\r\n  }\r\n\r\n  disabledListener() {\r\n    this.clear();\r\n  }\r\n\r\n  includeListener() {\r\n    this.listeners = this.disabledListeners;\r\n  }\r\n\r\n  addMouseDownEvent(eventListener) {\r\n    this.listeners.push({ type: \"mousedown\", eventListener });\r\n  }\r\n\r\n  addMouseUpEvent(eventListener) {\r\n    this.listeners.push({ type: \"mouseup\", eventListener });\r\n  }\r\n\r\n  addMouseMoveEvent(eventListener) {\r\n    this.listeners.push({ type: \"mousemove\", eventListener });\r\n  }\r\n\r\n  addMouseClickEvent(eventListener) {\r\n    this.listeners.push({ type: \"click\", eventListener });\r\n  }\r\n\r\n  setState(state) {\r\n    this.state = state;\r\n    return this;\r\n  }\r\n\r\n  clear() {\r\n    if (this.listeners.length > 0) {\r\n      this.disabledListeners = this.listeners;\r\n      this.isMouseDown = false;\r\n      this.isMouseMove = false;\r\n      this.listeners = [];\r\n      this.lastIndex = null;\r\n    }\r\n  }\r\n}\r\n\r\nexport const canvasControl = new Controll();\r\ncanvasControl.init();\r\n","export function configureCanvas(canvas, { w, h }) {\r\n  canvas.height = h;\r\n  canvas.width = w;\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport ReactModal from \"react-modal\";\r\n\r\nReactModal.setAppElement(\"#root\");\r\n\r\nexport function ModalWrapper({ isOpen, onRequestClose, children, width }) {\r\n  return (\r\n    <ReactModal\r\n      isOpen={isOpen}\r\n      closeTimeoutMS={200}\r\n      onRequestClose={onRequestClose}\r\n    >\r\n      <StyledRootWrapper onClick={onRequestClose}>\r\n        <StyledWrapper>\r\n          <StyledInner width={width} onClick={(e) => e.stopPropagation()}>\r\n            {children}\r\n            <CloseModal onClick={onRequestClose} />\r\n          </StyledInner>\r\n        </StyledWrapper>\r\n      </StyledRootWrapper>\r\n    </ReactModal>\r\n  );\r\n}\r\n\r\nexport const StyledInner = styled.div`\r\n  background: #fff;\r\n  padding: 25px;\r\n  display: inline-block;\r\n  vertical-align: middle;\r\n  text-align: left;\r\n  max-width: 800px;\r\n  margin: 10px;\r\n  width: ${({ width }) => width}px;\r\n  position: relative;\r\n  border-radius: 10px;\r\n  opacity: 0;\r\n  transition: all 0.3s;\r\n  transform: translateX(-100px);\r\n`;\r\n\r\nexport const StyledRootWrapper = styled.div`\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 1043;\r\n  position: fixed;\r\n  opacity: 0;\r\n  transition: all 0.3s;\r\n`;\r\n\r\nexport const StyledWrapper = styled.div`\r\n  position: absolute;\r\n  margin: 0;\r\n  padding: 0;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 1045;\r\n  outline: 0;\r\n  overflow: auto;\r\n  white-space: normal;\r\n  box-sizing: border-box;\r\n  text-align: center;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: #27262687;\r\n`;\r\n\r\nconst CloseModal = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  right: 0;\r\n  cursor: pointer;\r\n  width: 30px;\r\n  height: 30px;\r\n  &:after {\r\n    position: absolute;\r\n    content: \"\\\\2718\";\r\n    top: 50%;\r\n    right: 50%;\r\n    transform: translate(50%, -50%);\r\n  }\r\n`;\r\n","import styled from \"styled-components\";\r\n\r\nexport const Icon = styled.div`\r\n  cursor: pointer;\r\n`;\r\n","import styled from \"styled-components\";\r\n\r\nexport const Text = styled.p`\r\n  font-size: 14px;\r\n`;\r\n","import React from \"react\";\r\nimport { Button as DefaultButton } from \"@material-ui/core\";\r\n\r\nexport function Button({\r\n  icon: Icon,\r\n  type,\r\n  size = 14,\r\n  children,\r\n  onClick,\r\n  variant = \"contained\",\r\n  color = \"default\",\r\n}) {\r\n  return type === \"outline\" ? (\r\n    <DefaultButton onClick={onClick}>{children}</DefaultButton>\r\n  ) : (\r\n    <DefaultButton\r\n      style={{ fontSize: \"11px\" }}\r\n      onClick={onClick}\r\n      variant={variant}\r\n      color={color}\r\n      startIcon={Icon && <Icon size={size} />}\r\n    >\r\n      {children}\r\n    </DefaultButton>\r\n  );\r\n}\r\n","import styled from \"styled-components\";\r\n\r\nexport const FlexContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: ${({ direction }) => direction || \"row\"};\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nexport const Left = styled.div`\r\n  width: 25%;\r\n  text-align: left;\r\n  padding-right: 15px;\r\n`;\r\n","import React from \"react\";\r\nimport { FormControlLabel, Switch as DefaultSwitch } from \"@material-ui/core\";\r\nimport { FlexContainer, Left } from \"../containers\";\r\n\r\nexport function Switch({ label, name = \"gilad\", ...rest }) {\r\n  return (\r\n    <label style={{ cursor: \"pointer\" }}>\r\n      <FlexContainer>\r\n        <Left>\r\n          <FormControlLabel control={<DefaultSwitch {...rest} name={name} />} />\r\n        </Left>\r\n        <h3>{label}</h3>\r\n      </FlexContainer>\r\n    </label>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { FiSettings } from \"react-icons/fi\";\r\nimport { ModalWrapper } from \"./modal-wrapper\";\r\nimport { Icon } from \"../atoms\";\r\n\r\nexport function Settings() {\r\n  const [isOpen, setOpen] = React.useState(false);\r\n  return (\r\n    <>\r\n      <Icon onClick={() => setOpen(true)}>\r\n        <FiSettings color=\"#fff\" size=\"35\" />\r\n      </Icon>\r\n      <ModalWrapper isOpen={isOpen} onRequestClose={() => setOpen(false)}>\r\n        Setting info\r\n      </ModalWrapper>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { FiInfo } from \"react-icons/fi\";\r\nimport { ModalWrapper } from \"./modal-wrapper\";\r\nimport { Icon, Text } from \"../atoms\";\r\nimport { FlexContainer } from \"../containers\";\r\n\r\nexport function Info() {\r\n  const [isOpen, setOpen] = React.useState(true);\r\n  return (\r\n    <>\r\n      <Icon onClick={() => setOpen(true)}>\r\n        <FiInfo color=\"#fff\" size=\"35\" />\r\n      </Icon>\r\n\r\n      <InfoModal isOpen={isOpen} setOpen={setOpen} />\r\n    </>\r\n  );\r\n}\r\n\r\nfunction InfoModal({ isOpen, setOpen }) {\r\n  return (\r\n    <ModalWrapper\r\n      width={500}\r\n      isOpen={isOpen}\r\n      onRequestClose={() => setOpen(false)}\r\n    >\r\n      <FlexContainer>\r\n        <ColorBlock color=\"green\" />\r\n        <Text>- Точка старта алгоритма</Text>\r\n      </FlexContainer>\r\n      <FlexContainer>\r\n        <ColorBlock color=\"red\" />\r\n        <Text>- Точка завершения алгоритма</Text>\r\n      </FlexContainer>\r\n      <FlexContainer>\r\n        <ColorBlock color=\"#00bcd4\" />\r\n        <Text>- Пройденная вершина</Text>\r\n      </FlexContainer>\r\n      <FlexContainer>\r\n        <ColorBlock color=\"#f3fc23\" />\r\n        <Text>- Вершина, находящаяся в обработке</Text>\r\n      </FlexContainer>\r\n      <FlexContainer>\r\n        <ColorBlock color=\"#d2ef99\" />\r\n        <Text>- Соседи текущей вершины</Text>\r\n      </FlexContainer>\r\n      <FlexContainer>\r\n        <ColorBlock color=\"#bbbbbb\" />\r\n        <Text>- Цвет не проходимого барьера</Text>\r\n      </FlexContainer>\r\n    </ModalWrapper>\r\n  );\r\n}\r\n\r\nconst ColorBlock = styled.div`\r\n  width: 35px;\r\n  height: 35px;\r\n  background: ${({ color }) => color};\r\n  margin-right: 15px;\r\n`;\r\n","import React from \"react\";\r\nimport { FiBook } from \"react-icons/fi\";\r\nimport { ModalWrapper } from \"./modal-wrapper\";\r\nimport { Icon } from \"../atoms\";\r\n\r\nexport function AboutAlgoritms() {\r\n  const [isOpen, setOpen] = React.useState(false);\r\n  return (\r\n    <>\r\n      <Icon onClick={() => setOpen(true)}>\r\n        <FiBook color=\"#fff\" size=\"35\" />\r\n      </Icon>\r\n      <ModalWrapper isOpen={isOpen} onRequestClose={() => setOpen(false)}>\r\n        algoritm info\r\n      </ModalWrapper>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled, { css } from \"styled-components\";\r\nimport SyntaxHighlighter from \"react-syntax-highlighter\";\r\nimport { docco } from \"react-syntax-highlighter/dist/esm/styles/hljs\";\r\nimport { Button } from \"../atoms\";\r\n\r\nexport function InfoAboutAlgoritmApi({ codeString }) {\r\n  const [isOpen, toggle] = React.useReducer((prev) => !prev, false);\r\n\r\n  return (\r\n    <>\r\n      <Button onClick={toggle} type=\"outline\">\r\n        Посмотреть информацию об api\r\n      </Button>\r\n      <Wrapper isOpen={isOpen}>\r\n        <a\r\n          href=\"https://github.com/bogdanq/algorithms/blob/master/src/algoritms/bred-first-search.js\"\r\n          target=\"_blank\"\r\n        >\r\n          Пример алгоритма\r\n        </a>\r\n        <SyntaxHighlighter language=\"typescript\" style={docco}>\r\n          {codeString}\r\n        </SyntaxHighlighter>\r\n      </Wrapper>\r\n    </>\r\n  );\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  ${({ isOpen }) =>\r\n    isOpen\r\n      ? css`\r\n          height: 500px;\r\n          border-top: 1px solid #00bcd4;\r\n          margin-bottom: 15px;\r\n          overflow-y: auto;\r\n        `\r\n      : css`\r\n          height: 0;\r\n          overflow: hidden;\r\n        `};\r\n  transition: all 0.2s;\r\n  padding-top: 15px;\r\n`;\r\n","import React from \"react\";\r\nimport { FaHistory } from \"react-icons/fa\";\r\nimport styled, { css } from \"styled-components\";\r\nimport { useStore } from \"effector-react\";\r\nimport { ModalWrapper } from \"../molecules\";\r\nimport { FlexContainer } from \"../containers\";\r\nimport { Icon } from \"../atoms\";\r\nimport { $historyGame, recoveryHistoryGame, $currentGame } from \"../../../game\";\r\n\r\nexport function History() {\r\n  const [isOpen, setOpen] = React.useState(false);\r\n  const historyGame = useStore($historyGame);\r\n\r\n  return (\r\n    <HistoryIcon historyCount={historyGame.length}>\r\n      <Icon onClick={() => setOpen(true)}>\r\n        <FaHistory color=\"#fff\" size=\"35\" />\r\n      </Icon>\r\n      <ModalWrapper\r\n        width={600}\r\n        isOpen={isOpen}\r\n        onRequestClose={() => setOpen(false)}\r\n      >\r\n        {historyGame.length > 0 ? (\r\n          <HistoryList historyGame={historyGame} setOpen={setOpen} />\r\n        ) : (\r\n          <h1>У вас нет законченных игр </h1>\r\n        )}\r\n      </ModalWrapper>\r\n    </HistoryIcon>\r\n  );\r\n}\r\n\r\nfunction HistoryList({ historyGame, setOpen }) {\r\n  const currentGame = useStore($currentGame);\r\n  const handleChangeItem = React.useCallback(\r\n    (item) => {\r\n      recoveryHistoryGame(item.date);\r\n      setOpen(false);\r\n    },\r\n    [setOpen]\r\n  );\r\n\r\n  return (\r\n    <HistoryListWrapper>\r\n      <FlexContainer>\r\n        {historyGame.map((item, index) => (\r\n          <HistoryItem\r\n            active={currentGame === item.date}\r\n            onClick={() => handleChangeItem(item)}\r\n            key={index.toString()}\r\n          >\r\n            <p>Баррьеры: {item.barrier.length}</p>\r\n            <p>Старт: {item.startEndPosition[0]}</p>\r\n            <p>Конец: {item.startEndPosition[1]}</p>\r\n            <h3>Будет дата</h3>\r\n          </HistoryItem>\r\n        ))}\r\n      </FlexContainer>\r\n    </HistoryListWrapper>\r\n  );\r\n}\r\n\r\nconst HistoryItem = styled.div`\r\n  border: 2px solid #666666;\r\n  border-radius: 10px;\r\n  padding: 5px 10px;\r\n  cursor: pointer;\r\n  margin: 5px;\r\n  transition: all 0.3s;\r\n\r\n  ${({ active }) =>\r\n    active &&\r\n    css`\r\n      border: 2px solid #00bcd4;\r\n    `}\r\n\r\n  &:hover {\r\n    border: 2px solid #00bcd4;\r\n  }\r\n`;\r\n\r\nconst HistoryListWrapper = styled.div`\r\n  overflow-y: auto;\r\n  max-height: 500px;\r\n`;\r\n\r\nconst HistoryIcon = styled.div`\r\n  position: relative;\r\n  &:after {\r\n    ${({ historyCount }) =>\r\n      historyCount > 0 &&\r\n      css`\r\n    position: absolute;\r\n    content: \"${historyCount}\";\r\n    background: red;\r\n    border-radius: 50%;\r\n    padding: 3px;\r\n    font-size: 12px;\r\n    text-align: center;\r\n    top: -10px;\r\n    right: -15px;\r\n    height: 13px;\r\n    width: 13px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center\r\n    `}\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport Draggable from \"react-draggable\";\r\nimport { Settings, Info, AboutAlgoritms } from \"../molecules\";\r\nimport { History } from \"./history\";\r\n\r\nconst Wrapper = styled.div`\r\n  display: flex;\r\n  position: fixed;\r\n  padding: 15px 10px;\r\n  background-color: rgba(0, 0, 0, 0.6);\r\n  color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.5);\r\n  cursor: default;\r\n  left: 20px;\r\n  bottom: 20px;\r\n\r\n  &:hover {\r\n    cursor: move;\r\n  }\r\n\r\n  & > div {\r\n    margin: 0 10px;\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n`;\r\n\r\nexport function InfoDraggable() {\r\n  return (\r\n    <Draggable>\r\n      <Wrapper>\r\n        <Info />\r\n        <Settings />\r\n        <AboutAlgoritms />\r\n        <History />\r\n      </Wrapper>\r\n    </Draggable>\r\n  );\r\n}\r\n","import { createEvent, restore } from \"effector\";\r\n\r\nexport const handleChangeCode = createEvent();\r\nexport const $code = restore(handleChangeCode, \"\");\r\n","export const codeString = `\r\n// что бы работала визуализация, функция должна следовать общему api\r\n  type youAlgoritmFunction = (\r\n    startIndex: number, \r\n    endIndex: number, \r\n    graph: Graph\r\n  ) => { \r\n    path: Array<number>, \r\n    AlgoritmController \r\n  }\r\n\r\n// метод нужен, что бы каждую итерацию алгоритма сохранять его данные\r\n\r\n  type AlgoritmController = {\r\n    increment: () => void;\r\n    getAlgotitmResult: () => AlgoritmController;\r\n    addVertex: (\r\n      processing: Array<{vertex: number, siblings: number[]}>,\r\n      visited: number\r\n    ) => void;\r\n    count: number;\r\n    processing: Array<{vertex: number, siblings: number[]}>;\r\n    visited: number | null[];\r\n    startIndex: number;\r\n    endIndex: number;\r\n  }\r\n\r\n  const algoritmController = new AlgoritmController(startIndex: number, endIndex: number)\r\n\r\n\r\n  /*\r\n    GraphControll - создает граф, может вернуть вершину по индексу\r\n  */\r\n\r\n  enum CeilType {\r\n    START_POSITION = \"START_POSITION\",\r\n    END_POSITION = \"END_POSITION\",\r\n    BARIER = \"BARIER\",\r\n    EMPTY = \"EMPTY\",\r\n    VISITED = \"VISITED\",\r\n  };\r\n  \r\n  type Graph = { [key: string]: { type: CeilType , siblings: Array<number> } }\r\n\r\n  type GraphControll = {\r\n    getVertexByIndex: (index: number) => Graph\r\n  }\r\n\r\n  /* \r\n    функция restorePath восстановить путь, по переданному обьекту. \r\n    Содержит путь от предыдущего к следующей вершине\r\n  */\r\n\r\n  type RestorePath = (\r\n    endIndex: number, \r\n    startIndex: number, \r\n    parent: { [key: string]: number }\r\n  ) => Array<number>\r\n\r\n  // сanVisitedVertex проверяет, можно ли прайти на указанную вершину\r\n    type CanVisitedVertex = (\r\n      vertex: { type: CeilType , siblings: Array<number> }\r\n    ) => boolean\r\n`;\r\n","import React from \"react\";\r\nimport { useStore } from \"effector-react\";\r\nimport { graphControll as newGraph } from \"../../../../graph\";\r\nimport {\r\n  canVisitedVertex as newCan,\r\n  restorePath as newRe,\r\n  addCustomAlgoritm,\r\n} from \"../../../../algoritms\";\r\nimport { AlgoritmController as newAlg } from \"../../../../algoritms/controller\";\r\nimport { Button } from \"../../atoms\";\r\nimport { InfoAboutAlgoritmApi } from \"../../molecules\";\r\nimport { $code, handleChangeCode } from \"./model\";\r\nimport { codeString } from \"./code-string\";\r\n\r\nconst AlgoritmController = newAlg;\r\nconst restorePath = newRe;\r\nconst canVisitedVertex = newCan;\r\nconst graphControll = newGraph;\r\n\r\nlet foo = null;\r\n\r\nexport function CodeArea({ onRequestClose }) {\r\n  const code = useStore($code);\r\n\r\n  const handleChangeAlgoritm = React.useCallback(() => {\r\n    foo = new Function(\r\n      \"AlgoritmController\",\r\n      \"restorePath\",\r\n      \"canVisitedVertex\",\r\n      \"graphControll\",\r\n      `return ${code}`\r\n    );\r\n\r\n    addCustomAlgoritm(\r\n      foo(AlgoritmController, restorePath, canVisitedVertex, graphControll)\r\n    );\r\n\r\n    onRequestClose();\r\n  }, [onRequestClose, code]);\r\n\r\n  return (\r\n    <>\r\n      <InfoAboutAlgoritmApi codeString={codeString} />\r\n      <textarea\r\n        style={{ height: \"200px\", width: \"100%\" }}\r\n        onChange={(e) => handleChangeCode(e.target.value)}\r\n        value={code}\r\n      />\r\n      <Button onClick={handleChangeAlgoritm}>Сохранить</Button>\r\n    </>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useStore } from \"effector-react\";\r\nimport Draggable from \"react-draggable\";\r\nimport { renderCanvas } from \"./canvas\";\r\nimport {\r\n  setGameStatus,\r\n  gameStatus,\r\n  $gameState,\r\n  $path,\r\n  endGame,\r\n  $currentTimer,\r\n  setTimer,\r\n  checkGameStatus,\r\n} from \"./game\";\r\nimport {\r\n  $algoritms,\r\n  selectAlgoritm,\r\n  $currentAlgoritm,\r\n} from \"./algoritms/model\";\r\n\r\nimport \"./styles.css\";\r\nimport { sample, createStore, createEvent } from \"effector\";\r\n\r\nimport { InfoDraggable } from \"./gui/ui/organisms/info-block\";\r\nimport { FlexContainer, Left } from \"./gui/ui/containers\";\r\nimport { $canMoveDiagonal, changeDirection } from \"./graph\";\r\nimport { GrResume, GrClear, GrPlay, GrPause } from \"react-icons/gr\";\r\nimport { Button, Switch } from \"./gui/ui/atoms\";\r\nimport { TextField } from \"@material-ui/core\";\r\nimport { CodeArea } from \"./gui/ui/organisms/code-area\";\r\nimport { ModalWrapper } from \"./gui/ui/molecules\";\r\n\r\nconst $store = createStore({});\r\n\r\nsample({\r\n  source: $path,\r\n  clock: endGame,\r\n  target: $store,\r\n});\r\n\r\nexport default function App() {\r\n  const algoritms = useStore($algoritms);\r\n  const currentAlgoritm = useStore($currentAlgoritm);\r\n  const gameState = useStore($gameState);\r\n  const store = useStore($store);\r\n  const currentTimer = useStore($currentTimer);\r\n  const canMoveDiagonal = useStore($canMoveDiagonal);\r\n  const [isOpen, setOpen] = React.useState(false);\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <Draggable disabled>\r\n        <div className=\"select-bar\">\r\n          <h2 className=\"select-bar_title\">Информация:</h2>\r\n          <div className=\"info-wrapper\">\r\n            <h3 className=\"select-bar_info\">\r\n              Количество итераций: <span>{store?.count || 0}</span>\r\n            </h3>\r\n            <h3 className=\"select-bar_info\">\r\n              Время прохождения:\r\n              <span> {store?.timeEnd?.toFixed(4) || 0} ms</span>\r\n            </h3>\r\n            <h3 className=\"select-bar_info\">\r\n              Длина пути: <span>{store?.path?.length || 0}</span>\r\n            </h3>\r\n          </div>\r\n          <h2 className=\"select-bar_title\">Выбирите алгоритм:</h2>\r\n          <ul>\r\n            {algoritms.map((algoritm, index) => (\r\n              <li\r\n                onClick={() => {\r\n                  selectAlgoritm(algoritm.name);\r\n                  if (algoritm.modal) {\r\n                    setOpen(true);\r\n                  }\r\n                }}\r\n                className={currentAlgoritm === algoritm.name ? \"isActive\" : \"\"}\r\n                key={algoritm.name}\r\n              >\r\n                {algoritm.name}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n          <div className=\"btn-wrapper\">\r\n            {checkGameStatus(gameState, [\r\n              gameStatus.START,\r\n              gameStatus.PAUSE,\r\n              gameStatus.RESUME,\r\n            ]) ? (\r\n              !checkGameStatus(gameState, [gameStatus.PAUSE]) ? (\r\n                <Button\r\n                  onClick={() => setGameStatus(gameStatus.PAUSE)}\r\n                  icon={GrPause}\r\n                >\r\n                  Пауза\r\n                </Button>\r\n              ) : (\r\n                <Button\r\n                  onClick={() => setGameStatus(gameStatus.RESUME)}\r\n                  icon={GrResume}\r\n                >\r\n                  Продолжить\r\n                </Button>\r\n              )\r\n            ) : (\r\n              <Button\r\n                onClick={() => setGameStatus(gameStatus.START)}\r\n                icon={GrPlay}\r\n              >\r\n                Старт\r\n              </Button>\r\n            )}\r\n            <Button\r\n              onClick={() => setGameStatus(gameStatus.CLEAR)}\r\n              icon={GrClear}\r\n            >\r\n              Очистить\r\n            </Button>\r\n          </div>\r\n          <div className=\"info-wrapper\" style={{ borderTop: \"2px solid #fff\" }}>\r\n            <FlexContainer>\r\n              <Left>\r\n                <TextField\r\n                  type=\"number\"\r\n                  value={currentTimer}\r\n                  onChange={({ target }) => {\r\n                    setTimer(parseInt(target.value));\r\n                  }}\r\n                />\r\n              </Left>\r\n              <h3 className=\"select-bar_info\">Скорость</h3>\r\n            </FlexContainer>\r\n\r\n            <Switch\r\n              checked={canMoveDiagonal}\r\n              onChange={changeDirection}\r\n              label=\"Проход по диагонали\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </Draggable>\r\n      <InfoDraggable />\r\n\r\n      <CustomAlgoritmModal isOpen={isOpen} setOpen={setOpen} />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst CustomAlgoritmModal = ({ isOpen, setOpen }) => {\r\n  return (\r\n    <ModalWrapper\r\n      width={700}\r\n      isOpen={isOpen}\r\n      onRequestClose={() => setOpen(false)}\r\n    >\r\n      <CodeArea onRequestClose={() => setOpen(false)} />\r\n    </ModalWrapper>\r\n  );\r\n};\r\n","import { createGlobalStyle, css } from \"styled-components\";\r\nimport {\r\n  StyledRootWrapper,\r\n  StyledInner,\r\n} from \"./gui/ui/molecules/modal-wrapper\";\r\n\r\nconst globalCss = css`\r\n  .ReactModal__Body--open {\r\n    overflow: hidden;\r\n  }\r\n\r\n  .ReactModal__Content--after-open {\r\n    border: none !important;\r\n    background: transparent !important;\r\n    ${StyledInner} {\r\n      overflow: hidden;\r\n      opacity: 1;\r\n      transform: translateX(0);\r\n    }\r\n  }\r\n  .ReactModal__Content--before-close {\r\n    ${StyledInner} {\r\n      transform: translateX(100px);\r\n      opacity: 0;\r\n    }\r\n  }\r\n  .ReactModal__Overlay--after-open {\r\n    background-color: transparent !important;\r\n    ${StyledRootWrapper} {\r\n      opacity: 1;\r\n    }\r\n  }\r\n  .ReactModal__Overlay--before-close {\r\n    ${StyledRootWrapper} {\r\n      opacity: 0;\r\n    }\r\n  }\r\n\r\n  .MuiInputBase-input {\r\n    color: #fff;\r\n  }\r\n\r\n  .MuiInput-underline:before,\r\n  .MuiInput-underline:after {\r\n    border-bottom: 1px solid #fff;\r\n  }\r\n`;\r\nexport const GlobalModalStyles = createGlobalStyle`${globalCss}`;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { GlobalModalStyles } from \"./global-css\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\nReactDOM.render(\r\n  <>\r\n    <App />\r\n    <GlobalModalStyles />\r\n  </>,\r\n  rootElement\r\n);\r\n\r\nexport * from \"./algoritms\";\r\nexport * from \"./graph\";\r\nexport * from \"./game\";\r\n"],"sourceRoot":""}